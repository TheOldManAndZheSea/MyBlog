{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\babel-loader\\lib\\index.js!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-waterfall2\\waterfall.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-waterfall2\\waterfall.vue","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L1x1NjU4N1x1Njg2My9cdTVGMjBcdTU5MjlcdThENTAvXHU3RUMzXHU0RTYwXHU0RUUzXHU3ODAxL1ZTQ29kZS9cdTRFMkFcdTRFQkFcdTUzNUFcdTVCQTIvXHU1MjREXHU1M0YwL215YmxvZy1mcm9udGVuZC1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IHJlcXVpcmUoImJhYmVsLXJ1bnRpbWUvcmVnZW5lcmF0b3IiKTsKaW1wb3J0IGJ1cyBmcm9tICcuL2J1cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY29sOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMgogICAgfSwKICAgIHdpZHRoOiBOdW1iZXIsCiAgICBoZWlnaHQ6IHsKICAgICAgdHlwZTogU3RyaW5nIC8vIGRlZmF1bHQ6JzEwMHZoJywgICAg5Y+W5raIaGVpZ2h06buY6K6k5YC8CgogICAgfSwKICAgIGRhdGE6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IFtdCiAgICB9LAogICAgZ3V0dGVyV2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMAogICAgfSwKICAgIGlzVHJhbnNpdGlvbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgbGF6eURpc3RhbmNlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAwCiAgICB9LAogICAgbG9hZERpc3RhbmNlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAwCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9vdDogbnVsbCwKICAgICAgY29sdW1uczogW10sCiAgICAgIGxvYWRtb3JlOiB0cnVlLAogICAgICB0aW1lb3V0OiBudWxsLAogICAgICBsYXp5VGltZW91dDogbnVsbCwKICAgICAgbGFzdFNjcm9sbFRvcDogMCwKICAgICAgdGltZXI6IG51bGwsCiAgICAgIGxvYWRlZEluZGV4OiAwLAogICAgICBjb2x1bW5XaWR0aDogMCwKICAgICAgaXNyZXNpemluZzogZmFsc2UsCiAgICAgIGNsaWVudEhlaWdodDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwKICAgICAgY2xpZW50V2lkdGg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRydWVMYXp5RGlzdGFuY2U6IGZ1bmN0aW9uIHRydWVMYXp5RGlzdGFuY2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsaWVudFdpZHRoIC8gMzc1ICogdGhpcy5sYXp5RGlzdGFuY2U7CiAgICB9LAogICAgbWF4OiBmdW5jdGlvbiBtYXgoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsaWVudFdpZHRoIC8gMzc1ICogdGhpcy5sb2FkRGlzdGFuY2U7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY29sOiBmdW5jdGlvbiBjb2wodmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuaW5pdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGNsZWFyVGltZW91dChfdGhpczIudGltZXIpOwogICAgICAgIF90aGlzMi50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzMi5pc3Jlc2l6aW5nKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobmV3VmFsLmxlbmd0aCA8IF90aGlzMi5sb2FkZWRJbmRleCkgewogICAgICAgICAgICBfdGhpczIubG9hZGVkSW5kZXggPSAwOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChuZXdWYWwubGVuZ3RoID4gb2xkVmFsLmxlbmd0aCB8fCBuZXdWYWwubGVuZ3RoID4gX3RoaXMyLmxvYWRlZEluZGV4KSB7CiAgICAgICAgICAgIGlmIChuZXdWYWwubGVuZ3RoID09PSBvbGRWYWwubGVuZ3RoKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnJlc2l6ZShfdGhpczIubG9hZGVkSW5kZXggPiAwID8gX3RoaXMyLmxvYWRlZEluZGV4IDogbnVsbCk7CgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMyLnJlc2l6ZShvbGRWYWwubGVuZ3RoID4gMCA/IG9sZFZhbC5sZW5ndGggOiBudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9LCAzMDApOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIC8vaW5pdGlhbGl6ZQogICAgICB0aGlzLnJvb3QgPSB0aGlzLiRyZWZzLnZ1ZVdhdGVyZmFsbDsKICAgICAgdGhpcy5jbGVhckNvbHVtbigpOwogICAgICB2YXIgY29sID0gcGFyc2VJbnQodGhpcy5jb2wpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2w7IGkrKykgewogICAgICAgIHZhciBvZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgb2Rpdi5jbGFzc05hbWUgPSAndnVlLXdhdGVyZmFsbC1jb2x1bW4nOwoKICAgICAgICBpZiAodGhpcy53aWR0aCkgewogICAgICAgICAgb2Rpdi5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnOwoKICAgICAgICAgIGlmIChpICE9IDApIHsKICAgICAgICAgICAgb2Rpdi5zdHlsZS5tYXJnaW5MZWZ0ID0gdGhpcy5ndXR0ZXJXaWR0aCArICdweCc7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5jb2x1bW5XaWR0aCA9IHRoaXMud2lkdGg7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9kaXYuc3R5bGUud2lkdGggPSAxMDAgLyBwYXJzZUludChjb2wpICsgJyUnOwogICAgICAgICAgdGhpcy5jb2x1bW5XaWR0aCA9IDEwMCAvIHBhcnNlSW50KGNvbCkgLyAxMDAgKiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRoaXMucm9vdCkgewogICAgICAgICAgdGhpcy5yb290ID0gdGhpcy4kcmVmcy52dWVXYXRlcmZhbGw7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJvb3QgJiYgdGhpcy5yb290LmFwcGVuZENoaWxkKG9kaXYpOwogICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKG9kaXYpOwogICAgICB9CgogICAgICB0aGlzLnJlc2l6ZSgpOwogICAgfSwKICAgIF9fc2V0RG9tSW1hZ2VIZWlnaHQ6IGZ1bmN0aW9uIF9fc2V0RG9tSW1hZ2VIZWlnaHQoZG9tKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaW1ncywgaSwgbGF6eVNyYywgbmV3SW1nLCB0cnVlV2lkdGgsIGltZ0NvbHVtbkhlaWdodDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoZG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaW1ncyA9IGRvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyk7CiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IGltZ3MubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxhenlTcmMgPSBpbWdzW2ldLmdldEF0dHJpYnV0ZSgnbGF6eS1zcmMnKTsKCiAgICAgICAgICAgICAgICBpZiAoISghaW1nc1tpXS5nZXRBdHRyaWJ1dGUoJ3NyYycpICYmIGxhenlTcmMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbmV3SW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICBuZXdJbWcuc3JjID0gbGF6eVNyYzsKCiAgICAgICAgICAgICAgICBpZiAoIW5ld0ltZy5jb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRydWVXaWR0aCA9IGltZ3NbaV0ub2Zmc2V0V2lkdGggfHwgX3RoaXMzLmNvbHVtbldpZHRoOwogICAgICAgICAgICAgICAgaW1nQ29sdW1uSGVpZ2h0ID0gbmV3SW1nLmhlaWdodCAqIHRydWVXaWR0aCAvIG5ld0ltZy53aWR0aDsKCiAgICAgICAgICAgICAgICBpZiAoaW1nc1tpXS5vZmZzZXRXaWR0aCkgewogICAgICAgICAgICAgICAgICBpbWdzW2ldLnN0eWxlLmhlaWdodCA9IGltZ0NvbHVtbkhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICBuZXdJbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0cnVlV2lkdGggPSBpbWdzW2ldLm9mZnNldFdpZHRoIHx8IHRoaXMuY29sdW1uV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ0NvbHVtbkhlaWdodCA9IG5ld0ltZy5oZWlnaHQgKiB0cnVlV2lkdGggLyBuZXdJbWcud2lkdGg7CgogICAgICAgICAgICAgICAgICAgIGlmIChpbWdzW2ldLm9mZnNldFdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpbWdzW2ldLnN0eWxlLmhlaWdodCA9IGltZ0NvbHVtbkhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICBuZXdJbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQoZG9tKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHNlbGYsIG1pbiwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy9hcHBlbmQgZG9tIGVsZW1lbnQKICAgICAgICAgICAgICAgIHNlbGYgPSBfdGhpczQ7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM0LmNvbHVtbnMubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbWluID0gX3RoaXM0LmNvbHVtbnNbMF07CiAgICAgICAgICAgICAgICBpID0gMTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IF90aGlzNC5jb2x1bW5zLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19nZXRIZWlnaHQobWluKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19nZXRIZWlnaHQoc2VsZi5jb2x1bW5zW2ldKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0Mi50MCA+IF9jb250ZXh0Mi50MSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbWluID0gc2VsZi5jb2x1bW5zW2ldOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5fX3NldERvbUltYWdlSGVpZ2h0KGRvbSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBtaW4gJiYgbWluLmFwcGVuZENoaWxkKGRvbSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjaGVja0ltZzogZnVuY3Rpb24gY2hlY2tJbWcoZG9tKSB7CiAgICAgIC8vY2hlY2sgaGFzIGltYWdlCiAgICAgIGlmICghZG9tKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoZG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lICYmIGRvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW1nIikubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVzaXplOiBmdW5jdGlvbiByZXNpemUoaW5kZXgsIGVsZW1lbnRzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHNlbGYsIGosIGltZ3MsIG5ld0ltZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy9yZXNpemUgYW5kIHJlbmRlcgogICAgICAgICAgICAgICAgX3RoaXM1LmlzcmVzaXppbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXM1LnJvdXRlQ2hhbmdlZCA9IGZhbHNlOyAvLyDph43nva5yb3V0ZUNoYW5nZWQKCiAgICAgICAgICAgICAgICBzZWxmID0gX3RoaXM1OwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUuJHNsb3RzLmRlZmF1bHQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczUuaXNyZXNpemluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAoIWluZGV4ICYmIGluZGV4ICE9IDAgJiYgIWVsZW1lbnRzKSB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gX3RoaXM1LiRzbG90cy5kZWZhdWx0OwogICAgICAgICAgICAgICAgICBfdGhpczUubG9hZGVkSW5kZXggPSAwOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LmNsZWFyKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFlbGVtZW50cykgewogICAgICAgICAgICAgICAgICBfdGhpczUubG9hZGVkSW5kZXggPSBpbmRleDsKICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSBfdGhpczUuJHNsb3RzLmRlZmF1bHQuc3BsaWNlKGluZGV4KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBqID0gMDsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgaWYgKCEoaiA8IGVsZW1lbnRzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczUucm91dGVDaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign6Lev55Sx5Y+R55Sf5Y+Y5YyW77yMPHZ1ZS13YXRlcmZhbGw+57uE5Lu25YGc5q2i5riy5p+TJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAoIShlbGVtZW50c1tqXS5lbG0gJiYgc2VsZi5jaGVja0ltZyhlbGVtZW50c1tqXS5lbG0pKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpbWdzID0gZWxlbWVudHNbal0uZWxtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKTsKICAgICAgICAgICAgICAgIG5ld0ltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgbmV3SW1nLnNyYyA9IGltZ3NbMF0uZ2V0QXR0cmlidXRlKCdzcmMnKSB8fCBpbWdzWzBdLmdldEF0dHJpYnV0ZSgnbGF6eS1zcmMnKTsKCiAgICAgICAgICAgICAgICBpZiAoIW5ld0ltZy5jb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXBwZW5kKGVsZW1lbnRzW2pdLmVsbSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBzZWxmLmxhenlMb2FkKGltZ3MpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIG5ld0ltZy5vbmxvYWQgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXBwZW5kKGVsZW1lbnRzW2pdLmVsbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGF6eUxvYWQoaW1ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIG5ld0ltZy5vbmVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXBwZW5kKGVsZW1lbnRzW2pdLmVsbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhenlMb2FkKGltZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5hcHBlbmQoZWxlbWVudHNbal0uZWxtKTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIHNlbGYubG9hZGVkSW5kZXgrKzsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgX3RoaXM1LmlzcmVzaXppbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHNlbGYuJGVtaXQoJ2ZpbmlzaCcpOwoKICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29tcHV0ZWRQeDogZnVuY3Rpb24gY29tcHV0ZWRQeChpbWcsIGltZ0FwaSkgewogICAgICBpbWcuc3R5bGUud2lkdGggPSBpbWdBcGkud2lkdGggLyB0aGlzLmNvbHVtbldpZHRoOwogICAgfSwKICAgIGxhenlMb2FkOiBmdW5jdGlvbiBsYXp5TG9hZChpbWdzKSB7CiAgICAgIGlmICghaW1ncykgewogICAgICAgIGlmICghdGhpcy5yb290KSB7CiAgICAgICAgICB0aGlzLnJvb3QgPSB0aGlzLiRyZWZzLnZ1ZVdhdGVyZmFsbDsKICAgICAgICB9CgogICAgICAgIGltZ3MgPSB0aGlzLnJvb3QgJiYgdGhpcy5yb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKTsKICAgICAgfQoKICAgICAgaWYgKCFpbWdzIHx8IGltZ3MubGVuZ3RoIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGltZ3MubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKGltZ3NbaW5kZXhdLmNsYXNzTmFtZS5tYXRjaCgnYW5pbWF0aW9uJykgJiYgaW1nc1tpbmRleF0uZ2V0QXR0cmlidXRlKCdzcmMnKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIGlmIChpbWdzW2luZGV4XS5jbGFzc05hbWUubWF0Y2goJ2FuaW1hdGlvbicpICYmICFpbWdzW2luZGV4XS5nZXRBdHRyaWJ1dGUoJ3NyYycpKSB7CiAgICAgICAgICBpbWdzW2luZGV4XS5zcmMgPSBpbWdzW2luZGV4XS5nZXRBdHRyaWJ1dGUoJ2xhenktc3JjJyk7CiAgICAgICAgICBpbWdzW2luZGV4XS5yZW1vdmVBdHRyaWJ1dGUoJ2xhenktc3JjJyk7CiAgICAgICAgfSBlbHNlIGlmIChpbWdzW2luZGV4XS5nZXRBdHRyaWJ1dGUoJ3NyYycpICYmICFpbWdzW2luZGV4XS5jbGFzc05hbWUubWF0Y2goJ2FuaW1hdGlvbicpKSB7CiAgICAgICAgICBpbWdzW2luZGV4XS5jbGFzc05hbWUgPSBpbWdzW2luZGV4XS5jbGFzc05hbWUgKyAnIGFuaW1hdGlvbic7CiAgICAgICAgfSBlbHNlIGlmICghaW1nc1tpbmRleF0uZ2V0QXR0cmlidXRlKCdzcmMnKSAmJiBpbWdzW2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPCB0aGlzLmNsaWVudEhlaWdodCArIHRoaXMudHJ1ZUxhenlEaXN0YW5jZSkgewogICAgICAgICAgaW1nc1tpbmRleF0uc3JjID0gaW1nc1tpbmRleF0uZ2V0QXR0cmlidXRlKCdsYXp5LXNyYycpOwogICAgICAgICAgaW1nc1tpbmRleF0uY2xhc3NOYW1lID0gaW1nc1tpbmRleF0uY2xhc3NOYW1lICsgJyBhbmltYXRpb24nOwogICAgICAgICAgaW1nc1tpbmRleF0ucmVtb3ZlQXR0cmlidXRlKCdsYXp5LXNyYycpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyQ29sdW1uOiBmdW5jdGlvbiBjbGVhckNvbHVtbigpIHsKICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtLnJlbW92ZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5jb2x1bW5zID0gW107CiAgICB9LAogICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gJyc7CiAgICAgIH0pOwogICAgfSwKICAgIG1peDogZnVuY3Rpb24gbWl4KCkgewogICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgICBlbGVtZW50cy5zb3J0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVzaXplKDAsIGVsZW1lbnRzKTsKICAgIH0sCiAgICBfX2dldEhlaWdodDogZnVuY3Rpb24gX19nZXRIZWlnaHQoZG9tKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgZG9tLm9mZnNldEhlaWdodCk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIF9fZW1pdExvYWRNb3JlOiBmdW5jdGlvbiBfX2VtaXRMb2FkTW9yZSgpIHsKICAgICAgaWYgKCF0aGlzLnJvb3QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuaGVpZ2h0ID8gdGhpcy5yb290LnNjcm9sbFRvcCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLmhlaWdodCA/IHRoaXMucm9vdC5zY3JvbGxIZWlnaHQgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICB2YXIgZGlmZiA9IHNjcm9sbEhlaWdodCAtIHNjcm9sbFRvcCAtIHNlbGYuY2xpZW50SGVpZ2h0OwogICAgICBzZWxmLiRlbWl0KCdzY3JvbGwnLCB7CiAgICAgICAgc2Nyb2xsSGVpZ2h0OiBzY3JvbGxIZWlnaHQsCiAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3AsCiAgICAgICAgY2xpZW50SGVpZ2h0OiBzZWxmLmNsaWVudEhlaWdodCwKICAgICAgICBkaWZmOiBkaWZmLAogICAgICAgIHRpbWU6IERhdGUubm93KCkKICAgICAgfSk7CgogICAgICBpZiAoZGlmZiA8IHNlbGYubWF4ICYmIHNlbGYubG9hZG1vcmUgJiYgc2Nyb2xsSGVpZ2h0ID4gc2VsZi5jbGllbnRIZWlnaHQpIHsKICAgICAgICBzZWxmLmxhc3RTY3JvbGxUb3AgPSBzY3JvbGxUb3A7CiAgICAgICAgc2VsZi5sb2FkbW9yZSA9IGZhbHNlOwogICAgICAgIHNlbGYuJGVtaXQoJ2xvYWRtb3JlJyk7CiAgICAgIH0gZWxzZSBpZiAoZGlmZiA+PSBzZWxmLm1heCkgewogICAgICAgIHNlbGYubG9hZG1vcmUgPSB0cnVlOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQoc2VsZi5sYXp5VGltZW91dCk7CiAgICAgIHNlbGYubGF6eVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmxhenlMb2FkKCk7CiAgICAgIH0sIDE0KTsKICAgIH0sCiAgICAvLyDnm5HlkKzot6/nlLHmmK/lkKblj5HnlJ/lj5jljJYKICAgIF9fbGlzdGVuUm91dGVyQ2hhbmdlOiBmdW5jdGlvbiBfX2xpc3RlblJvdXRlckNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAvLyDph43lhplwdXNoU3RhdGXkuI5yZXBsYWNlU3RhdGXkuovku7blh73mlbAKICAgICAgdmFyIF93ciA9IGZ1bmN0aW9uIF93cih0eXBlKSB7CiAgICAgICAgLy8g6K6w5b2V5Y6f55Sf5LqL5Lu2CiAgICAgICAgdmFyIG9yaWcgPSBoaXN0b3J5W3R5cGVdOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyDop6blj5Hljp/nlJ/kuovku7YKICAgICAgICAgIHZhciBydiA9IG9yaWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8g6Ieq5a6a5LmJ5LqL5Lu2CgogICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQodHlwZSk7CiAgICAgICAgICBlLmFyZ3VtZW50cyA9IGFyZ3VtZW50czsgLy8g6Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu2CgogICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgICByZXR1cm4gcnY7CiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIHZhciBldmVudHMgPSBbJ3JlcGxhY2VTdGF0ZScsICdwdXNoU3RhdGUnXTsKICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNi5yb3V0ZUNoYW5nZWQgPSB0cnVlOwogICAgICAgIH0pOyAvLyDph43lhploaXN0b3J5CgogICAgICAgIHdpbmRvdy5oaXN0b3J5W2V2ZW50XSA9IF93cihldmVudCk7CiAgICAgIH0pOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LnJvdXRlQ2hhbmdlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLnJvb3QgJiYgKHRoaXMucm9vdC5vbnNjcm9sbCA9IG51bGwpOwogICAgdGhpcy5yb290ICYmICh0aGlzLnJvb3Qub25yZXNpemUgPSBudWxsKTsKICAgIHdpbmRvdy5vbnNjcm9sbCA9IG51bGw7CiAgICB3aW5kb3cub25yZXNpemUgPSBudWxsOwogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICBidXMuJG9uKCdmb3JjZVVwZGF0ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXM3LnJlc2l6ZSgpOwogICAgfSk7CiAgICBidXMuJG9uKCdtaXgnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzNy5taXgoKTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgIHRoaXMuX19saXN0ZW5Sb3V0ZXJDaGFuZ2UoKTsKCiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzOC5pbml0KCk7CgogICAgICB2YXIgc2VsZiA9IF90aGlzODsKCiAgICAgIGlmIChfdGhpczguaGVpZ2h0KSB7CiAgICAgICAgX3RoaXM4LnJvb3Qub25zY3JvbGwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgc2VsZi5fX2VtaXRMb2FkTW9yZSgpOwogICAgICAgIH07CgogICAgICAgIF90aGlzOC5yb290LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNlbGYuX19lbWl0TG9hZE1vcmUoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgc2VsZi5fX2VtaXRMb2FkTW9yZSgpOwogICAgICAgIH07CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNlbGYuX19lbWl0TG9hZE1vcmUoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["waterfall.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n\t.vue-waterfall{\r\n\t\twidth:100%;\r\n\t\toverflow-y: auto;\r\n\t\tposition: relative;\r\n\t}\r\n\t.vue-waterfall .slot-box{\r\n\t\tposition: absolute;\r\n\t\ttop: 100%;\r\n\t\tleft: 100%;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.vue-waterfall .vue-waterfall-column{\r\n\t\tfloat: left;\r\n\t}\r\n\t.vue-waterfall.is-transition img{\r\n\t\topacity: 0;\r\n\t}\r\n\t.vue-waterfall.is-transition img.animation{\r\n\t\tanimation:0.4s  lazy-animation  linear;\r\n\t\tanimation-fill-mode: forwards;\r\n\t}\r\n\r\n\t @keyframes lazy-animation{\r\n\t\tfrom{\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\t\tto{\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n</style>\r\n<template>\r\n\t<div class=\"vue-waterfall\" :style=\"{height:height}\" ref=\"vueWaterfall\" id=\"vueWaterfall\" :class=\"isTransition&&'is-transition'\" >\r\n\t\t<div class=\"slot-box\">\r\n\t\t\t<slot ></slot>\t\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nglobal.regeneratorRuntime = require(\"babel-runtime/regenerator\");\r\nimport bus from './bus'\r\n\r\n\texport default{\r\n\t\tprops:{\r\n\t\t\tcol:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:2\r\n\t\t\t},\r\n\t\t\twidth:Number,\r\n\t\t\theight:{\r\n\t\t\t\ttype:String\r\n\t\t\t\t// default:'100vh',    取消height默认值\r\n\t\t\t},\r\n\t\t\tdata:{\r\n\t\t\t\ttype:Array,\r\n\t\t\t\tdefault:[]\r\n\t\t\t},\r\n\t\t\tgutterWidth:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:10\r\n\t\t\t},\r\n\t\t\tisTransition:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:true\r\n\t\t\t},\r\n\t\t\tlazyDistance:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:300\r\n\t\t\t},\r\n\t\t\tloadDistance:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:300\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\troot:null,\r\n\t\t\t\tcolumns:[],\r\n\t\t\t\tloadmore:true,\r\n\t\t\t\ttimeout:null,\r\n\t\t\t\tlazyTimeout:null,\r\n\t\t\t\tlastScrollTop:0,\r\n\t\t\t\ttimer:null,\r\n\t\t\t\tloadedIndex:0,\r\n\t\t\t\tcolumnWidth:0,\r\n\t\t\t\tisresizing:false,\r\n\t\t\t\tclientHeight:document.documentElement.clientHeight || document.body.clientHeight,\r\n\t\t\t\tclientWidth:document.documentElement.clientWidth || document.body.clientWidth,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\ttrueLazyDistance(){\r\n\t\t\t\treturn this.clientWidth/375*this.lazyDistance\r\n\t\t\t},\r\n\t\t\tmax(){\r\n\t\t\t\treturn this.clientWidth/375*this.loadDistance\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tcol(val){\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdata(newVal,oldVal){\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tclearTimeout(this.timer)\r\n\t\t\t\t\tthis.timer = setTimeout(()=>{\r\n\t\t\t\t\t\tif(this.isresizing)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(newVal.length<this.loadedIndex)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.loadedIndex = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(newVal.length>oldVal.length || newVal.length>this.loadedIndex)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(newVal.length === oldVal.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.resize(this.loadedIndex>0?this.loadedIndex:null)\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.resize(oldVal.length>0?oldVal.length:null)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},300)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinit(){   //initialize\r\n\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\tthis.clearColumn()\r\n\t\t\t\tvar col = parseInt(this.col)\r\n\t\t\t\tfor(var i =0;i<col;i++){\r\n\t\t\t\t\tlet odiv = document.createElement('div')\r\n\t\t\t\t\todiv.className = 'vue-waterfall-column'\r\n\t\t\t\t\tif(this.width)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\todiv.style.width = this.width + 'px'\r\n\t\t\t\t\t\tif(i != 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\todiv.style.marginLeft = this.gutterWidth + 'px'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.columnWidth = this.width\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\todiv.style.width = 100/parseInt(col) +'%'\r\n\t\t\t\t\t\tthis.columnWidth = 100/parseInt(col)/100 * document.documentElement.clientWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.root)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.root&&this.root.appendChild(odiv)\r\n\t\t\t\t\tthis.columns.push(odiv)\r\n\t\t\t\t}\r\n\t\t\t\tthis.resize()\r\n\t\t\t},\r\n\t\t\tasync __setDomImageHeight(dom)\r\n\t\t\t{\r\n\t\t\t\tif(!dom.getElementsByTagName)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar imgs = dom.getElementsByTagName('img')\r\n\t\t\t\tfor(var i=0;i<imgs.length;i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar lazySrc = imgs[i].getAttribute('lazy-src')\r\n\t\t\t\t\tif(!imgs[i].getAttribute('src')&&lazySrc)\r\n\t\t\t \t\t{\r\n\t\t\t\t\t\t var newImg = new Image()\r\n\t\t\t\t\t\t newImg.src = lazySrc\r\n\t\t\t\t\t\t if(newImg.complete)\r\n\t\t\t\t\t\t {\r\n\t\t\t\t\t\t \tvar trueWidth = imgs[i].offsetWidth || this.columnWidth\r\n\t\t\t\t\t\t\tvar imgColumnHeight = newImg.height*trueWidth/newImg.width\r\n\t\t\t\t\t\t\tif(imgs[i].offsetWidth)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\timgs[i].style.height = imgColumnHeight+'px'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t else{\r\n\t\t\t\t\t\t\t await new Promise((resolve,reject)=>{\r\n\t\t\t\t\t\t\t\t newImg.onload =  function(){\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t \tvar trueWidth = imgs[i].offsetWidth || this.columnWidth\r\n\t\t\t\t\t\t\t\t \tvar imgColumnHeight = newImg.height*trueWidth/newImg.width\r\n\t\t\t\t\t\t\t\t\tif(imgs[i].offsetWidth)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\timgs[i].style.height = imgColumnHeight+'px'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewImg.onerror=  function(){\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t })\r\n\t\t\t\t\t\t }\r\n\t\t\t \t\t}\r\n\t\t\t\t}\t\t\t \t\r\n\t\t\t},\r\n\t\t\tasync append(dom){   //append dom element\r\n\t\t\t\tvar self = this\r\n\t\t\t\tif(this.columns.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet min = this.columns[0]\r\n\t\t\t\t\t\tfor(var i=1;i<this.columns.length;i++){\r\n\t\t\t\t\t\t\tif(await self.__getHeight(min)>await self.__getHeight(self.columns[i])){\r\n\t\t\t\t\t\t\t\tmin = self.columns[i]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tawait this.__setDomImageHeight(dom)\r\n\t\t\t\t\tmin && min.appendChild(dom)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcheckImg(dom){   //check has image\r\n\t\t\t\tif(!dom)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif(dom.getElementsByTagName&&dom.getElementsByTagName(\"img\").length)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync resize(index,elements){     //resize and render\r\n\t\t\t\tthis.isresizing = true\r\n\t\t\t\tthis.routeChanged = false  // 重置routeChanged\r\n\t\t\t\tvar self = this\r\n\t\t\t\tif(!this.$slots.default){\r\n\t\t\t\t\tthis.isresizing = false\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!index&&index!=0&&!elements)\r\n\t\t\t\t{\r\n\t\t\t\t\telements = this.$slots.default\r\n\t\t\t\t\tthis.loadedIndex = 0\r\n\t\t\t\t\tthis.clear()\r\n\t\t\t\t}\r\n\t\t\t\telse if(!elements){\r\n\t\t\t\t\tthis.loadedIndex = index\r\n\t\t\t\t\telements = this.$slots.default.splice(index)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var j=0;j<elements.length;j++){\r\n\t\t\t\t\tif(this.routeChanged){\r\n\t\t\t\t\t\tconsole.warn('路由发生变化，<vue-waterfall>组件停止渲染')\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(elements[j].elm&&self.checkImg(elements[j].elm))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar imgs = elements[j].elm.getElementsByTagName('img')\r\n\t\t\t\t\t\tvar newImg = new Image()\r\n\t\t\t\t\t\tnewImg.src = imgs[0].getAttribute('src') || imgs[0].getAttribute('lazy-src')\r\n\t\t\t\t\t\tif(newImg.complete)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tawait self.append(elements[j].elm)\t\r\n\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tawait new Promise( (resolve,reject)=>{\r\n\t\t\t\t\t\t\t\tnewImg.onload = async function(){\r\n\t\t\t\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewImg.onerror= async function(e){\r\n\t\t\t\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.loadedIndex++\r\n\t\t\t\t}\r\n\t\t\t\tthis.isresizing = false\r\n\t\t\t\tself.$emit('finish')\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tcomputedPx(img,imgApi){\r\n\r\n\t\t\t\timg.style.width = imgApi.width/this.columnWidth\r\n\t\t\t},\r\n\t\t\tlazyLoad(imgs){  \r\n\t\t\t\tif(!imgs)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!this.root)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\t\t}\r\n\t\t\t\t\timgs = this.root&&this.root.getElementsByTagName('img')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!imgs || imgs.length<0)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tfor(var index=0;index<imgs.length; index++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(imgs[index].className.match('animation')&&imgs[index].getAttribute('src'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(imgs[index].className.match('animation')&&!imgs[index].getAttribute('src'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timgs[index].src = imgs[index].getAttribute('lazy-src')\r\n\t\t\t\t\t\timgs[index].removeAttribute('lazy-src')\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(imgs[index].getAttribute('src')&&!imgs[index].className.match('animation')){\r\n\t\t\t\t\t\timgs[index].className = imgs[index].className + ' animation'\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(!imgs[index].getAttribute('src')&&imgs[index].getBoundingClientRect().top<this.clientHeight+this.trueLazyDistance)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timgs[index].src = imgs[index].getAttribute('lazy-src')\r\n\t\t\t\t\t\timgs[index].className = imgs[index].className + ' animation'\r\n\t\t\t\t\t\timgs[index].removeAttribute('lazy-src')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclearColumn(){\r\n\t\t\t\tthis.columns.forEach((item)=>{\r\n\t\t\t\t\titem.remove()\r\n\t\t\t\t})\r\n\t\t\t\tthis.columns=[]\r\n\t\t\t},\r\n\t\t\tclear(){\r\n\t\t\t\tthis.columns.forEach((item)=>{\r\n\t\t\t\t\titem.innerHTML = ''\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmix(){\r\n\t\t\t\tvar elements = this.$slots.default\r\n\t\t\t\telements.sort(()=>{return Math.random()-0.5})\r\n\t\t\t\tthis.resize(0,elements)\r\n\t\t\t},\r\n\t\t\tasync __getHeight(dom){\r\n\t\t\t \treturn dom.offsetHeight\r\n\t\t\t},\r\n\t\t\t__emitLoadMore(){\r\n\t\t\t\tif(!this.root)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar self = this\r\n\t\t\t\tconst scrollTop =  this.height?this.root.scrollTop : document.documentElement.scrollTop  || document.body.scrollTop\r\n\t\t\t\tconst scrollHeight = this.height?this.root.scrollHeight : document.documentElement.offsetHeight\r\n\t\t\t\tvar diff = scrollHeight - scrollTop - self.clientHeight\r\n\t\t\t\tself.$emit('scroll',{scrollHeight:scrollHeight,scrollTop:scrollTop,clientHeight:self.clientHeight,diff:diff,time:Date.now()})\r\n\t\t\t\tif(diff <self.max&&self.loadmore&&scrollHeight>self.clientHeight){\r\n\t\t\t\t\tself.lastScrollTop =  scrollTop\r\n\t\t\t\t\tself.loadmore = false\r\n\t\t\t\t\tself.$emit('loadmore')\r\n\t\t\t\t}\r\n\t\t\t\telse if(diff>=self.max){\r\n\t\t\t\t\tself.loadmore = true\r\n\t\t\t\t}\r\n\t\t\t\tclearTimeout(self.lazyTimeout)\r\n\t\t\t\tself.lazyTimeout = setTimeout(function(){\r\n\t\t\t\t\tself.lazyLoad()\r\n\t\t\t\t},14)\r\n\t\t\t},\r\n\r\n\t\t\t// 监听路由是否发生变化\r\n\t\t\t__listenRouterChange () {\r\n\t\t\t\t// 重写pushState与replaceState事件函数\r\n\t\t\t\tvar _wr = function (type) {\r\n\t\t\t\t\t// 记录原生事件\r\n\t\t\t\t\tvar orig = history[type];\r\n\t\t\t\t\treturn function () {\r\n\t\t\t\t\t\t// 触发原生事件\r\n\t\t\t\t\t\tvar rv = orig.apply(this, arguments);\r\n\t\t\t\t\t\t// 自定义事件\r\n\t\t\t\t\t\tvar e = new Event(type);\r\n\t\t\t\t\t\te.arguments = arguments;\r\n\t\t\t\t\t\t// 触发自定义事件\r\n\t\t\t\t\t\twindow.dispatchEvent(e);\r\n\t\t\t\t\t\treturn rv;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst events = ['replaceState','pushState']\r\n\t\t\t\tevents.forEach(event => {\r\n\t\t\t\t\twindow.addEventListener(event, ()=>{\r\n\t\t\t\t\t\tthis.routeChanged = true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 重写history\r\n\t\t\t\t\twindow.history[event] = _wr(event)\r\n\t\t\t\t})\r\n\t\t\t\twindow.addEventListener('popstate', ()=>{\r\n\t\t\t\t\tthis.routeChanged = true\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\tdestroyed() {\r\n\t\t\tthis.root && (this.root.onscroll = null)\r\n\t\t\tthis.root && (this.root.onresize = null)\r\n\t\t\twindow.onscroll = null\r\n\t\t\twindow.onresize = null\r\n\t\t},\r\n\t\tbeforeCreate(){\r\n\t\t\tbus.$on('forceUpdate',()=>{this.resize()})\r\n\t\t\tbus.$on('mix',()=>{this.mix()})\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tmounted(){\r\n\t\t\tthis.__listenRouterChange()\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.init()\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tif(this.height){\r\n\t\t\t\t\tthis.root.onscroll=function(e){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.root.addEventListener('touchmove',function(){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\twindow.onscroll=function(e){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdocument.addEventListener('touchmove',function(){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>"],"sourceRoot":"node_modules/vue-waterfall2"}]}