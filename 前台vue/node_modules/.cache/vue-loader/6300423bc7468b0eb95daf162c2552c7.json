{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Comments.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Comments.vue","mtime":1628309540000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZWRpdGluZzogZmFsc2UsCiAgICAgICAgICAgIGNvbW1lbnRMaXN0OltdLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgICAgICAgdGhpcy5nZXRDb21tZW50TGlzdCgpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8vIOiOt+WPluivhOiuuuWIl+ihqAogICAgICAgIGFzeW5jIGdldENvbW1lbnRMaXN0KCl7CiAgICAgICAgICAgIGNvbnN0IHtkYXRhOiByZXN9ID0gYXdhaXQgdGhpcy4kYmxvZy5nZXQoJy9hZG1pbi9nZXRDb21tZW50TGlzdCcpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgdGhpcy5jb21tZW50TGlzdCA9IHJlcy5kYXRhCiAgICAgICAgfSwKICAgICAgICAvLyDliKDpmaTor4TorroKICAgICAgICBhc3luYyBkZWxldGVDb21tZW50QnlJZChpZCl7CiAgICAgICAgICAgIC8vIOW8ueWHuuWvueivneahhgogICAgICAgICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAgICAgICAgICAgICAn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6K+E6K66LCDmmK/lkKbnu6fnu60nLAogICAgICAgICAgICAgICAgICAgICfmj5DnpLonLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICApLmNhdGNoKGVyciA9PiBlcnIpCiAgICAgICAgICAgIGlmIChjb25maXJtUmVzdWx0ICE9PSAnY29uZmlybScpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3Qge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRibG9nLmdldChgL2NvbW1lbnRzLyR7aWR9L2RlbGV0ZWApCiAgICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMjAwKXsKICAgICAgICAgICAgICAgcmV0dXJuICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKXvvIEnKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Q29tbWVudExpc3QoKQogICAgICAgICAgICByZXR1cm4gIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5Yqf77yBJykKICAgICAgICB9LAogICAgICAgIC8vIOi3s+i9rOWIsOWNmuWuouivpuaDhemhtQogICAgICAgIGdldEJsb2dJbmZvKGJsb2dJZCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9ibG9nSW5mbycsIHF1ZXJ5OiB7aWQ6IGJsb2dJZH19KTsKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["Comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comments.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div>\n        <!--    面包屑导航区-->\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>评论管理</el-breadcrumb-item>\n        </el-breadcrumb>\n        <el-card>\n            <div class=\"el-card__header\" style=\"text-align: left;padding: 0\">\n                <h1 style=\"margin: 0;\">评论管理</h1>\n            </div>\n            <ul style=\"padding: 0;\" class=\"comment-list\">\n                <li class=\"comment\" v-for=\"cmt in commentList\" :key=\"cmt.id\">\n                    <el-avatar :src=\"cmt.avatar\"></el-avatar>\n                    <div class=\"content\">\n                        <div style=\"display: flex;justify-content: space-between;width: 100%\">\n                            <div class=\"nkname\">\n                                <span class=\"name\">{{cmt.nickname}} </span>\n                                <span class=\"date\">{{cmt.createTime | dataFormat3}}</span>\n                                <span class=\"rp\">回复了你的文章</span>\n                                <span @click=\"getBlogInfo(cmt.blog.id)\" class=\"blog\">{{cmt.blog.title}}</span>\n                            </div>\n                            <div class=\"op\">\n                                <span class=\"del\" @click=\"deleteCommentById(cmt.id)\">删除</span>\n                            </div>\n                        </div>\n                        <p class=\"reply\">{{cmt.content}}</p>\n                    </div>\n                </li>\n            </ul>\n        </el-card>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            editing: false,\n            commentList:[],\n        }\n    },\n    created(){\n        this.getCommentList()\n    },\n    methods: {\n        // 获取评论列表\n        async getCommentList(){\n            const {data: res} = await this.$blog.get('/admin/getCommentList')\n            // console.log(res)\n            this.commentList = res.data\n        },\n        // 删除评论\n        async deleteCommentById(id){\n            // 弹出对话框\n            const confirmResult = await this.$confirm(\n                    '此操作将永久删除该评论, 是否继续',\n                    '提示',\n                    {\n                        confirmButtonText: '确定',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }\n            ).catch(err => err)\n            if (confirmResult !== 'confirm') {\n                return this.$message.info('已取消删除')\n            }\n            const {data: res} = await this.$blog.get(`/comments/${id}/delete`)\n            if (res.code !== 200){\n               return  this.$message.error('删除失败！')\n            }\n            await this.getCommentList()\n            return  this.$message.success('删除成功！')\n        },\n        // 跳转到博客详情页\n        getBlogInfo(blogId) {\n            this.$router.push({path: '/blogInfo', query: {id: blogId}});\n        },\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n    .comment{\n        border-bottom: 1px dashed #ccc;\n        margin: 10px 0;\n        display: flex;\n    }\n    .el-avatar{\n        width: 35px;\n        height: 35px;\n        border: 2px solid white;\n        box-shadow: 0 0 10px 2px rgba(0, 0, 0, .06);\n        flex-shrink: 0;\n    }\n    .content{\n        text-align: left;\n        font-size: 14px;\n        flex-grow: 1;\n        .nkname{\n            margin-left: 10px;\n            max-width: 530px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            .rp,.date{\n                color: #999;\n                margin-left: 10px;\n            }\n            .blog{\n                color: #349edf;\n                margin-left: 10px;\n                cursor: pointer;\n            }\n        }\n        .reply{\n            margin-left: 10px;\n        }\n        .op{\n            color: #ddd;\n            font-weight: lighter;\n            .rep{\n                color: #349edf;\n            }\n            .del{\n                color: red;\n            }\n        }\n        .op:hover{\n            cursor: pointer;\n        }\n    }\n\n</style>"]}]}