{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Blogs.vue?vue&type=style&index=0&id=9edea85e&scoped=true&lang=less&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Blogs.vue","mtime":1647496983499},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtdGFnIHsKICAgIG1hcmdpbjogMnB4Owp9CgouYmxvZy1pbmZvcm1hdGlvbiB7CiAgICB3aWR0aDogMTAwJTsKCiAgICAuZmlyc3RQaWN0dXJlIHsKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgaDF7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAuZWwtYnV0dG9uewogICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLypwYWRkaW5nLXJpZ2h0OiAyMHB4OyovCiAgICAgICAgLypib3JkZXItcmlnaHQ6IDFweCBkYXNoZWQgIzk5OTsqLwogICAgICAgIC8qYm94LXNpemluZzogYm9yZGVyLWJveDsqLwoKICAgICAgICAuaW1nIHsKICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgfQogICAgfQoKICAgIC5taWRkbGUtaXRlbSB7CiAgICAgICAgLypwYWRkaW5nLXJpZ2h0OiAyMHB4OyovCiAgICAgICAgLypib3JkZXItcmlnaHQ6IDFweCBkYXNoZWQgIzk5OTsqLwogICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAvKmJveC1zaXppbmc6IGJvcmRlci1ib3g7Ki8KCiAgICAgICAgaDEgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQoKICAgIH0KCiAgICAucmlnaHQtaXRlbSB7CiAgICAgICAgLyptYXJnaW4tbGVmdDogMjBweDsqLwoKICAgICAgICAuY29tbWVudCB7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgI2NjYzsKICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgfQoKICAgICAgICAuZWwtYXZhdGFyIHsKICAgICAgICAgICAgd2lkdGg6IDM1cHg7CiAgICAgICAgICAgIGhlaWdodDogMzVweDsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4wNik7CiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRlbnQgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGZsZXgtZ3JvdzogMTsKCiAgICAgICAgICAgIC5ua25hbWUgewogICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDUzMHB4OwogICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKCiAgICAgICAgICAgICAgICAucnAsIC5kYXRlIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzk5OTsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAuYmxvZyB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMzNDllZGY7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5yZXBseSB7CiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLm9wIHsKICAgICAgICAgICAgICAgIGNvbG9yOiAjZGRkOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7CgogICAgICAgICAgICAgICAgLnJlcCB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMzNDllZGY7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLmRlbCB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLm9wOmhvdmVyIHsKICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKLmNoYW5nZS10eXBlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouY2hhbmdlLXR5cGU6aG92ZXIgewogICAgY3Vyc29yOiBwb2ludGVyOwogICAgY29sb3I6ICM0MDllZmY7Cn0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc0OHB4KXsKICAgIC5lbC1pbnB1dCwuZWwtc2VsZWN0ewogICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIH0KICAgIC5ibG9nLWluZm9ybWF0aW9uewogICAgICAgIC5sZWZ0LWl0ZW17CiAgICAgICAgICAgIHdpZHRoOiA0MCU7CiAgICAgICAgfQogICAgICAgIC5taWRkbGUtaXRlbXsKICAgICAgICAgICAgd2lkdGg6IDMwJTsKICAgICAgICB9CiAgICAgICAgLnJpZ2h0LWl0ZW17CiAgICAgICAgICAgIHdpZHRoOiAzMCU7CiAgICAgICAgfQogICAgfQp9Cgo="},{"version":3,"sources":["Blogs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8bA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Blogs.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div>\n        <!--    面包屑导航区-->\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>博客管理</el-breadcrumb-item>\n        </el-breadcrumb>\n        <el-card class=\"card1\" shadow=\"never\" style=\"text-align: left\">\n            <div class=\"el-card__header\" style=\"text-align: left;padding: 0;\">\n                <h1 style=\"margin: 0;\">博客管理</h1>\n            </div>\n            <el-input style=\"width: 200px;margin-right: 20px;margin-top: 10px\" placeholder=\"标题\"\n                      v-model=\"queryInfo.title\"></el-input>\n            <el-select v-model=\"type\" @change=\"selectType \" placeholder=\"分类\" style=\"margin-right: 20px\">\n                <el-option\n                        v-for=\"item in typeList\"\n                        :key=\"item.id\"\n                        :label=\"item.name\"\n                        :value=\"item.name\">\n                </el-option>\n            </el-select>\n            <el-button @click=\"clearSearh\">清除</el-button>\n            <el-button type=\"primary\" @click=\"getBlogList\">搜索</el-button>\n            <el-table :data=\"blogList\" border stripe >\n                <el-table-column type=\"expand\">\n                    <template slot-scope=\"scope\">\n                        <div class=\"blog-information\">\n                            <el-row :gutter=\"20\">\n                                <el-col class=\"left-item\" :sm=\"12\" :lg=\"8\">\n                                    <el-card shadow=\"never\" >\n                                        <div class=\"firstPicture\" >\n                                            <h1 style=\"margin: 5px auto\">博客首图 &nbsp;&nbsp;<el-button size=\"mini\" circle type=\"primary\" @click=\"editPic(scope.row)\" ><i class=\"el-icon-edit\"></i></el-button></h1>\n                                            <el-image class=\"img\" :src=\"scope.row.firstPicture\"></el-image>\n                                        </div>\n                                    </el-card>\n                                </el-col>\n                                <el-col class=\"middle-item\" :sm=\"12\" :lg=\"8\">\n                                    <el-card shadow=\"never\">\n                                        <h1 style=\"margin: 5px auto\">描述</h1>\n                                        <div style=\"word-break:break-all;\">{{scope.row.description}}</div>\n                                    </el-card>\n                                </el-col>\n                            </el-row>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"标题\" prop=\"title\">\n                    <template slot-scope=\"scope\">\n                        <p @click=\"getBlogInfo(scope.row.id)\" class=\"change-type\">{{scope.row.title}}</p>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"分类\" prop=\"type.name\" width=\"110px\">\n                    <template slot-scope=\"scope\">\n                        <div @click=\"changeBlogType(scope.row)\" class=\"change-type\">{{scope.row.type.name}}\n                            <i class=\"el-icon-edit\"></i></div>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"标签\" prop=\"tags\" width=\"250px\">\n                    <template slot-scope=\"scope\">\n                        <el-tag size=\"medium\" v-for=\"(tag, i) in scope.row.tags\" :key=\"tag.id\" closable\n                                @close=\"handleClose(i,scope.row)\">{{tag.name}}\n                        </el-tag>\n                        <el-input size=\"small\" style=\"width: 100px;\" class=\"input-new-tag\" v-if=\"scope.row.inputVisible\"\n                                  v-model=\"scope.row.inputValue\" ref=\"saveTagInput\"\n                                  @keyup.enter.native=\"handleInputConfirm(scope.row)\"\n                                  @blur=\"handleInputConfirm(scope.row)\">\n                        </el-input>\n                        <el-button v-else size=\"mini\" class=\"button-new-tag\" @click=\"showInput(scope.row)\">+ New Tag\n                        </el-button>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"阅读量\" prop=\"views\" width=\"70px\"></el-table-column>\n                <el-table-column label=\"更新时间\" prop=\"updateTime\" width=\"150px\">\n                    <template slot-scope=\"scope\">\n                        {{scope.row.updateTime | dataFormat }}\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"操作\" width=\"90px\">\n                    <template slot-scope=\"scope\">\n                        <!--            修改按钮-->\n                        <el-button\n                                type=\"primary\"\n                                icon=\"el-icon-edit\"\n                                size=\"mini\"\n                                circle\n                                @click=\"editBlogByid(scope.row)\"\n                        ></el-button>\n                        <!--            删除按钮-->\n                        <el-button\n                                type=\"danger\"\n                                icon=\"el-icon-delete\"\n                                size=\"mini\"\n                                circle\n                                @click=\"removeBlogById(scope.row.id)\"\n                        ></el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <el-pagination\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    :page-size=\"pagesize\"\n                    :current-page=\"pagenum\"\n                    :layout=\"pagLayout\"\n                    :total=\"totalcount\">\n            </el-pagination>\n            <el-dialog class=\"publish_dialog\" title=\"修改文章分类\" :visible.sync=\"editTypeDialogFormVisible\">\n                <el-form style=\"text-align: left\" ref=\"editTypeFormRef\" :model=\"editTypeForm\" :rules=\"editTypeFormRules\"\n                         class=\"edit_type_form\">\n                    <el-form-item label=\"文章分类\" prop=\"type\">\n                        <el-select v-model=\"editTypeForm.typeId\" placeholder=\"请选择文章分类\" style=\"margin-right: 10px\">\n                            <el-option v-for=\"type in typeList\" :label=\"type.name\" :value=\"type.id\"></el-option>\n                        </el-select>\n                        <el-button>+ 新建分类</el-button>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"backPage\">取消</el-button>\n                    <el-button type=\"primary\" @click=\"changeTypeSubmit\">提交修改</el-button>\n                </div>\n            </el-dialog>\n            <el-dialog class=\"pic_dialog\" title=\"修改文章首图\" center :visible.sync=\"editPicDialogFormVisible\" style=\"width: 800px;margin: 0 auto\">\n                <el-form  ref=\"editPicFormRef\"\n                         class=\"edit_pic_form\">\n                    <el-form-item style=\"text-align: center\">\n                        <el-upload\n                                ref=\"upload\"\n                                action=\"http://hikari.top:8090/upload\"\n                                list-type=\"picture-card\"\n                                :limit=\"1\"\n                                :on-preview=\"handlePictureCardPreview\"\n                                :on-remove=\"handleRemove\"\n                                :on-success=\"handleSuccess\">\n                            <i class=\"el-icon-plus\"></i>\n                        </el-upload>\n                        <el-dialog :visible.sync=\"dialogVisible\">\n                            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n                        </el-dialog>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"backPage2\">取消</el-button>\n                    <el-button type=\"primary\" @click=\"changePicSubmit\">确定</el-button>\n                </div>\n            </el-dialog>\n        </el-card>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            queryInfo: {\n                title: '',\n                typeId: null\n            },\n            pagenum: 1,\n            pagesize: 8,\n            blogList: [],\n            totalcount: 0,\n            editing: false,\n            commentList: [],\n            typeList: [],\n            tagList: [],\n            editTypeForm: {\n                typeId: null\n            },\n            blog:null,\n            editTypeDialogFormVisible: false,\n            editTypeFormRules: {\n                type: [\n                    {required: true, message: '请选择类型', trigger: 'blur'}\n                ],\n            },\n            type: '',\n            inputValue: '',\n            inputVisible: false,\n            editPicDialogFormVisible:false,\n            dialogVisible:false,\n            dialogImageUrl:'',\n            screenWidth: document.documentElement.clientWidth,  //实时屏幕宽度\n        }\n    },\n    computed:{\n        pagLayout(){\n            if (this.screenWidth<768){\n                return 'prev, pager, next'\n            } else {\n                return 'total, prev, pager, next, jumper'\n            }\n        }\n    },\n    created() {\n        this.getBlogList()\n        this.getFullTypeList()\n        this.getFullTagList()\n    },\n    methods: {\n        handleRemove() {\n            this.dialogImageUrl = ''\n            // console.log(file, fileList);\n        },\n        handlePictureCardPreview(file) {\n            this.dialogImageUrl = file.url;\n            this.dialogVisible = true;\n        },\n        async handleSuccess(res) {\n            this.dialogImageUrl = res.data\n        },\n        // 点击取消按钮\n        backPage2() {\n            this.editPicDialogFormVisible = false\n            this.$refs.upload.clearFiles()\n            this.$refs.editPicFormRef.resetFields()\n        },\n        // 修改博客首图\n        async changePicSubmit(){\n            this.blog.firstPicture = this.dialogImageUrl\n            const {data: res} = await this.$blog.post('/admin/blogs', {\n                blog: this.blog\n            })\n            // console.log(res)\n            if (res.code === 200) {\n                this.editPicDialogFormVisible = false\n\n                return this.$message.success('修改首图成功！')\n            } else {\n                this.editPicDialogFormVisible = false\n                return this.$message.error('修改首图失败！')\n            }\n        },\n        editPic(row){\n            this.blog = row\n            // console.log(this.blog)\n            this.editPicDialogFormVisible = true\n        },\n        // 跳转到博客详情页\n        getBlogInfo(blogId) {\n            this.$router.push({path: '/blogInfo', query: {id: blogId}});\n        },\n        // 修改当前页码\n        handleCurrentChange(newSize) {\n            this.pagenum = newSize\n            this.getBlogList()\n        },\n        // 修改当前页大小\n        handleSizeChange(newSize) {\n            this.pagesize = newSize\n            this.getGoodsList()\n        },\n        // 获取博客列表\n        async getBlogList() {\n            const {data: res} = await this.$blog.post('/admin/getBlogList', {\n                title: this.queryInfo.title,\n                typeId: this.queryInfo.typeId,\n                pagenum: this.pagenum,\n                pagesize: this.pagesize,\n            })\n            res.data.content.forEach(item => {\n                // 控制文本框的显示与隐藏\n                item.inputVisible = false\n                // 文本框中输入的值\n                item.inputValue = ''\n                // 标签值转为字符串\n            })\n            this.blogList = res.data.content\n            this.totalcount = res.data.totalElements\n            // console.log(this.blogList)\n        },\n        // 删除博客\n        async removeBlogById(id) {\n            // 弹出对话框\n            const confirmResult = await this.$confirm(\n                '此操作将永久删除该博客, 是否继续',\n                '提示',\n                {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }\n            ).catch(err => err)\n            if (confirmResult !== 'confirm') {\n                return this.$message.info('已取消删除')\n            }\n            const {data: res} = await this.$blog.get('/admin/blogs/' + id + '/delete')\n            if (res.code !== 200) return this.$message.error('删除博客失败！')\n            this.$message.success('删除博客成功！')\n            this.getBlogList()\n        },\n        // 编辑博客\n        editBlogByid(blog) {\n            // console.log(blog)\n            this.$router.push({\n                path: \"/admin/blog-input\",\n                query: {blog: JSON.stringify(blog)}\n            })\n        },\n        // 得到所有的分类\n        async getFullTypeList() {\n            const {data: res} = await this.$blog.get('/admin/getFullTypeList')\n            this.typeList = res.data\n        },\n        // 得到所有的标签\n        async getFullTagList() {\n            const {data: res} = await this.$blog.get('/admin/getFullTagList')\n            this.tagList = res.data\n        },\n        // 修改博客分类\n        async changeBlogType(blog) {\n            this.editTypeDialogFormVisible = true\n            this.editTypeForm.blog = blog\n        },\n        // 点击取消按钮\n        backPage() {\n            this.$refs.editTypeFormRef.resetFields()\n            this.editTypeDialogFormVisible = false\n        },\n        // 提交类型修改\n        async changeTypeSubmit() {\n            let blog = this.editTypeForm.blog\n            blog.type = this.typeList.find(item => item.id === this.editTypeForm.typeId)\n            // console.log(blog)\n            const {data: res} = await this.$blog.post('/admin/blogs', {\n                blog: blog\n            })\n            if (res.code === 200) {\n                this.editTypeDialogFormVisible = false\n                return this.$message.success('修改博客分类成功！')\n            } else {\n                this.editTypeDialogFormVisible = false\n                return this.$message.error('修改博客分类失败！')\n            }\n        },\n        // 点击按钮,展示文本输入框\n        showInput(row) {\n            row.inputVisible = true\n            //   让输入框自动获取焦点\n            // $nextTick方法的作用：当页面元素被重新渲染之后，才会至指定回调函数中的代码\n            this.$nextTick(_ => {\n                this.$refs.saveTagInput.$refs.input.focus()\n            })\n        },\n        // 文本框失去焦点,或按下了Enter都会触发\n        async handleInputConfirm(row) {\n            // 输入的内容为空时，清空\n            if (row.inputValue.trim().length === 0) {\n                row.inputValue = ''\n                row.inputVisible = false\n                return\n            }\n            const newTag = this.tagList.find(item => item.name === row.inputValue.trim())\n            if (newTag !== undefined) {\n                row.tags.push(newTag)\n                row.tagIds = row.tags.map(item => {\n                    return item.id\n                }).toString().replace(/\\[|]/g, '');\n                // console.log(row)\n                const res = await this.uploadBlog(row)\n                if (res === true) {\n                    row.inputValue = ''\n                    row.inputVisible = false\n                    return this.$message.success('修改博客标签成功！')\n                } else {\n                    this.$message.error('修改博客标签失败！')\n                }\n            } else {\n                const res1 = await this.createTag(row.inputValue.trim())\n                if (res1 === null) {\n                    this.$message.error('修改博客标签失败！')\n                } else {\n                    row.tags.push(res1)\n                    row.tagIds = row.tags.map(item => {\n                        return item.id\n                    }).toString().replace(/\\[|]/g, '');\n                    const res2 = await this.uploadBlog(row)\n                    if (res2 === true) {\n                        row.inputValue = ''\n                        row.inputVisible = false\n                        return this.$message.success('修改博客标签成功！')\n                    } else {\n                        this.$message.error('修改博客标签失败！')\n                    }\n                }\n            }\n        },\n        // 创建新标签\n        async createTag(newTag) {\n            const {data: res} = await this.$blog.post('/admin/tags', {\n                tag: {name: newTag}\n            })\n            if (res.code !== 200) {\n                return null\n            } else  {\n                return res.data\n            }\n        },\n        async uploadBlog(inputBlog) {\n            // 提交数据库，保存修改\n            const {data: res} = await this.$blog.post('/admin/blogs', {\n                blog: inputBlog\n            })\n            // console.log(res)\n            return res.code === 200;\n        },\n\n        // 删除对应的参数可选项\n        async handleClose(i, row) {\n            let tag = row.tags[i]\n            // console.log(tag)\n            row.tags.splice(i, 1)\n            row.tagIds = row.tags.map(item => {\n                return item.id\n            }).toString().replace(/\\[|]/g, '');\n            const res = await this.uploadBlog(row)\n            if (res===true){\n                const res2 = await this.dealDeletedTag(tag)\n                if (res2 === true){\n                    return this.$message.success('修改博客标签成功！')\n                } else {\n                    this.$message.error('修改博客标签失败！')\n                }\n            }\n        },\n        // 删除博客标签后将多余标签级联删除\n        async dealDeletedTag(tag){\n            const {data: res} = await this.$blog.get(`/admin/dealDeletedTag/${tag.id}`)\n            return res.code === 200\n        },\n        // 选择类型\n        selectType() {\n            this.queryInfo.typeId = this.typeList.find(item => item.name === this.type).id\n        },\n        // 清空搜索内容\n        clearSearh() {\n            this.queryInfo.typeId = null\n            this.queryInfo.title = ''\n            this.type = ''\n            this.getBlogList()\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n    .el-tag {\n        margin: 2px;\n    }\n\n    .blog-information {\n        width: 100%;\n\n        .firstPicture {\n            text-align: center;\n            h1{\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                .el-button{\n                    margin-left: 20px;\n                }\n            }\n            /*padding-right: 20px;*/\n            /*border-right: 1px dashed #999;*/\n            /*box-sizing: border-box;*/\n\n            .img {\n                margin: 10px 0;\n                width: 90%;\n                border-radius: 10px;\n            }\n        }\n\n        .middle-item {\n            /*padding-right: 20px;*/\n            /*border-right: 1px dashed #999;*/\n            height: 100%;\n            /*box-sizing: border-box;*/\n\n            h1 {\n                text-align: center;\n            }\n\n        }\n\n        .right-item {\n            /*margin-left: 20px;*/\n\n            .comment {\n                border-bottom: 1px dashed #ccc;\n                margin: 10px 0;\n                display: flex;\n            }\n\n            .el-avatar {\n                width: 35px;\n                height: 35px;\n                border: 2px solid white;\n                box-shadow: 0 0 10px 2px rgba(0, 0, 0, .06);\n                flex-shrink: 0;\n            }\n\n            .content {\n                text-align: left;\n                font-size: 14px;\n                flex-grow: 1;\n\n                .nkname {\n                    margin-left: 10px;\n                    max-width: 530px;\n                    overflow: hidden;\n                    white-space: nowrap;\n                    text-overflow: ellipsis;\n\n                    .rp, .date {\n                        color: #999;\n                        margin-left: 10px;\n                    }\n\n                    .blog {\n                        color: #349edf;\n                        margin-left: 10px;\n                    }\n                }\n\n                .reply {\n                    margin-left: 10px;\n                }\n\n                .op {\n                    color: #ddd;\n                    font-weight: lighter;\n\n                    .rep {\n                        color: #349edf;\n                    }\n\n                    .del {\n                        color: red;\n                    }\n                }\n\n                .op:hover {\n                    cursor: pointer;\n                }\n            }\n        }\n    }\n\n    .change-type {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .change-type:hover {\n        cursor: pointer;\n        color: #409eff;\n    }\n\n    @media screen and (max-width: 748px){\n        .el-input,.el-select{\n            width: 100% !important;\n            margin-bottom: 20px;\n        }\n        .blog-information{\n            .left-item{\n                width: 40%;\n            }\n            .middle-item{\n                width: 30%;\n            }\n            .right-item{\n                width: 30%;\n            }\n        }\n    }\n\n</style>"]}]}