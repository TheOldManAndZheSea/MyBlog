{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\TagChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\TagChart.vue","mtime":1628309540000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGFnTGlzdDogW10sCiAgICAgICAgICAgIHJhbmRlckxpc3Q6IFtdLAogICAgICAgICAgICByYWRpdXM6MTEyLAogICAgICAgICAgICBkaXN0YW5jZSA6IDE4NwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY3JlZW5BZGFwdGVyKQogICAgfSwKICAgIHNjcmVlbkFkYXB0ZXIoKSB7CiAgICAgICAgdGhpcy5jaGFydEluc3RhbmNlLnJlc2l6ZSgpCiAgICB9LAogICAgbWV0aG9kczogewoKICAgICAgICBjb21wYXJlKHByb3BlcnR5KSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgbGV0IHZhbHVlMSA9IGFbcHJvcGVydHldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGxldCB2YWx1ZTIgPSBiW3Byb3BlcnR5XS5sZW5ndGg7CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUyIC0gdmFsdWUxOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXREYXRhKCkgewogICAgICAgICAgICBjb25zdCB7ZGF0YTogcmVzfSA9IGF3YWl0IHRoaXMuJGJsb2cuZ2V0KCcvYWRtaW4vZ2V0RnVsbFRhZ0xpc3QnKQogICAgICAgICAgICB0aGlzLnRhZ0xpc3QgPSByZXMuZGF0YS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWyduYW1lJ10KICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb24oKQogICAgICAgIH0sCiAgICAgICAgLy8g55Sf5oiQdGFn55qE5LiJ57u05Z2Q5qCHCiAgICAgICAgaW5pdFBvc2l0aW9uKCkgewogICAgICAgICAgICBsZXQgbGVuID0gdGhpcy50YWdMaXN0Lmxlbmd0aAogICAgICAgICAgICBsZXQgcmFkaXVzID0gdGhpcy5yYWRpdXMvL+eQg+S9k+WNiuW+hAogICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlIC8v54Sm6LedCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBrID0gKDIgKiAoaSArIDEpIC0gMSkgLyBsZW4gLSAxOwogICAgICAgICAgICAgICAgbGV0IGEgPSBNYXRoLmFjb3MoaykKICAgICAgICAgICAgICAgIGxldCBiID0gYSAqIE1hdGguc3FydChsZW4gKiBNYXRoLlBJKTsKICAgICAgICAgICAgICAgIGxldCB4ID0gcmFkaXVzICogTWF0aC5zaW4oYSkgKiBNYXRoLmNvcyhiKTsKICAgICAgICAgICAgICAgIGxldCB5ID0gcmFkaXVzICogTWF0aC5zaW4oYSkgKiBNYXRoLnNpbihiKTsKICAgICAgICAgICAgICAgIGxldCB6ID0gcmFkaXVzICogTWF0aC5jb3MoYSkKICAgICAgICAgICAgICAgIGxldCBzY2FsZSA9IGRpc3RhbmNlIC8gKGRpc3RhbmNlIC0geik7CiAgICAgICAgICAgICAgICBsZXQgZm9udFNpemUgPSAxMjsKICAgICAgICAgICAgICAgIGxldCBjb2xvciA9ICJyZ2IoIiArIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyNTUpICsgIiwiICsgcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDI1NSkgKyAiLCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMjU1KSArICIpIjsKICAgICAgICAgICAgICAgIGxldCBhbHBoYSA9ICh6ICsgcmFkaXVzKSAvICgyICogcmFkaXVzKQogICAgICAgICAgICAgICAgbGV0IG9wYWNpdHkgPSBhbHBoYSArIDAuNQogICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9ICJhbHBoYShvcGFjaXR5ID0gIiArIChhbHBoYSArIDAuNSkgKiAxMDAgKyAiKSI7CiAgICAgICAgICAgICAgICB0aGlzLnJhbmRlckxpc3QgPSB0aGlzLnJhbmRlckxpc3QuY29uY2F0KHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhZ0xpc3RbaV0sCiAgICAgICAgICAgICAgICAgICAgeDogeCwKICAgICAgICAgICAgICAgICAgICB5OiB5LAogICAgICAgICAgICAgICAgICAgIHo6IHosCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbG9yLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHksCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IGZvbnRTaXplCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZSgpCiAgICAgICAgfSwKICAgICAgICBhbmltYXRlKCkgewogICAgICAgICAgICB0aGlzLnJhbmRlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gMTg3CiAgICAgICAgICAgICAgICBsZXQgcmFkaXVzID0gMTEyCiAgICAgICAgICAgICAgICBsZXQgY3ggPSAyMDAKICAgICAgICAgICAgICAgIGxldCBjeSA9IDE1MAogICAgICAgICAgICAgICAgbGV0IHNjYWxlID0gZGlzdGFuY2UgLyAoZGlzdGFuY2UgLSBpdGVtLnopOwogICAgICAgICAgICAgICAgbGV0IGFscGhhID0gKGl0ZW0ueiArIHJhZGl1cykgLyAoMiAqIHJhZGl1cyk7CiAgICAgICAgICAgICAgICBsZXQgbGVmdCA9IGl0ZW0ueCArIGN4OwogICAgICAgICAgICAgICAgbGV0IHRvcCA9IGl0ZW0ueSArIGN5OwogICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwtNTAlKSBzY2FsZSgnICsgc2NhbGUgKyAnKSc7CiAgICAgICAgICAgICAgICBpdGVtLm9wYWNpdHkgPSBhbHBoYSArIDAuNTsKICAgICAgICAgICAgICAgIGl0ZW0uekluZGV4ID0gcGFyc2VJbnQoc2NhbGUgKiAxMDApOwogICAgICAgICAgICAgICAgaXRlbS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07CiAgICAgICAgICAgICAgICBpdGVtLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMucm90YXRlWCgpOwogICAgICAgICAgICB0aGlzLnJvdGF0ZVkoKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yYW5kZXJMaXN0KQogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlKTsKICAgICAgICB9LAoKICAgICAgICByb3RhdGVYKCkgewogICAgICAgICAgICBsZXQgYW5nbGVYID0gTWF0aC5QSSAvIDUwMAogICAgICAgICAgICBsZXQgYW5nbGVZID0gTWF0aC5QSSAvIDUwMAogICAgICAgICAgICBsZXQgY29zID0gTWF0aC5jb3MoYW5nbGVYKQogICAgICAgICAgICBsZXQgc2luID0gTWF0aC5zaW4oYW5nbGVYKQogICAgICAgICAgICB0aGlzLnJhbmRlckxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICBsZXQgeTEgPSBpdGVtLnkgKiBjb3MgLSBpdGVtLnogKiBzaW47CiAgICAgICAgICAgICAgICBsZXQgejEgPSBpdGVtLnogKiBjb3MgKyBpdGVtLnkgKiBzaW47CiAgICAgICAgICAgICAgICBpdGVtLnkgPSB5MTsKICAgICAgICAgICAgICAgIGl0ZW0ueiA9IHoxOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcm90YXRlWSgpIHsKICAgICAgICAgICAgbGV0IGFuZ2xlWCA9IE1hdGguUEkgLyA1MDAKICAgICAgICAgICAgbGV0IGFuZ2xlWSA9IE1hdGguUEkgLyA1MDAKICAgICAgICAgICAgbGV0IGNvcyA9IE1hdGguY29zKGFuZ2xlWSkKICAgICAgICAgICAgbGV0IHNpbiA9IE1hdGguc2luKGFuZ2xlWSkKICAgICAgICAgICAgdGhpcy5yYW5kZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgbGV0IHgxID0gaXRlbS54ICogY29zIC0gaXRlbS56ICogc2luOwogICAgICAgICAgICAgICAgbGV0IHoxID0gaXRlbS56ICogY29zICsgaXRlbS54ICogc2luOwogICAgICAgICAgICAgICAgaXRlbS54ID0geDE7CiAgICAgICAgICAgICAgICBpdGVtLnogPSB6MTsKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["TagChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TagChart.vue","sourceRoot":"src/components/admin/charts","sourcesContent":["<template>\n    <div class=\"com-container\">\n        <h3 class=\"title\">标签数据</h3>\n        <div class=\"com-chart\" ref=\"tag_ref\">\n            <div class=\"tag\" v-for=\"tag in randerList\" :key=\"tag.id\"\n                 :style=\"{left:tag.x+'px',top:tag.y+'px',color:tag.color,opacity:tag.opacity,filter:tag.filter,fontSize:tag.fontSize+'px',transform: tag.transform}\">\n                {{tag.name}}\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            tagList: [],\n            randerList: [],\n            radius:112,\n            distance : 187\n        }\n    },\n    created() {\n        this.getData()\n    },\n    mounted() {\n        window.addEventListener('resize', this.screenAdapter)\n    },\n    screenAdapter() {\n        this.chartInstance.resize()\n    },\n    methods: {\n\n        compare(property) {\n            return function (a, b) {\n                let value1 = a[property].length;\n                let value2 = b[property].length;\n                return value2 - value1;\n            }\n        },\n        async getData() {\n            const {data: res} = await this.$blog.get('/admin/getFullTagList')\n            this.tagList = res.data.map((item) => {\n                return item['name']\n            })\n            this.initPosition()\n        },\n        // 生成tag的三维坐标\n        initPosition() {\n            let len = this.tagList.length\n            let radius = this.radius//球体半径\n            let distance = this.distance //焦距\n            for (let i = 0; i < len; i++) {\n                let k = (2 * (i + 1) - 1) / len - 1;\n                let a = Math.acos(k)\n                let b = a * Math.sqrt(len * Math.PI);\n                let x = radius * Math.sin(a) * Math.cos(b);\n                let y = radius * Math.sin(a) * Math.sin(b);\n                let z = radius * Math.cos(a)\n                let scale = distance / (distance - z);\n                let fontSize = 12;\n                let color = \"rgb(\" + parseInt(Math.random() * 255) + \",\" + parseInt(Math.random() * 255) + \",\" + parseInt(Math.random() * 255) + \")\";\n                let alpha = (z + radius) / (2 * radius)\n                let opacity = alpha + 0.5\n                let filter = \"alpha(opacity = \" + (alpha + 0.5) * 100 + \")\";\n                this.randerList = this.randerList.concat({\n                    name: this.tagList[i],\n                    x: x,\n                    y: y,\n                    z: z,\n                    color: color,\n                    opacity: opacity,\n                    filter: filter,\n                    fontSize: fontSize\n                })\n            }\n            this.animate()\n        },\n        animate() {\n            this.randerList.forEach(function (item) {\n                let distance = 187\n                let radius = 112\n                let cx = 200\n                let cy = 150\n                let scale = distance / (distance - item.z);\n                let alpha = (item.z + radius) / (2 * radius);\n                let left = item.x + cx;\n                let top = item.y + cy;\n                let transform = 'translate(-50%,-50%) scale(' + scale + ')';\n                item.opacity = alpha + 0.5;\n                item.zIndex = parseInt(scale * 100);\n                item.transform = transform;\n                item.webkitTransform = transform;\n            });\n            this.rotateX();\n            this.rotateY();\n            // console.log(this.randerList)\n            requestAnimationFrame(this.animate);\n        },\n\n        rotateX() {\n            let angleX = Math.PI / 500\n            let angleY = Math.PI / 500\n            let cos = Math.cos(angleX)\n            let sin = Math.sin(angleX)\n            this.randerList.forEach(function(item) {\n                let y1 = item.y * cos - item.z * sin;\n                let z1 = item.z * cos + item.y * sin;\n                item.y = y1;\n                item.z = z1;\n            })\n        },\n        rotateY() {\n            let angleX = Math.PI / 500\n            let angleY = Math.PI / 500\n            let cos = Math.cos(angleY)\n            let sin = Math.sin(angleY)\n            this.randerList.forEach(function(item) {\n                let x1 = item.x * cos - item.z * sin;\n                let z1 = item.z * cos + item.x * sin;\n                item.x = x1;\n                item.z = z1;\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n\n    .com-container {\n        width: 100%;\n        height: 284px;\n        position: relative;\n    }\n\n    .com-chart {\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        width: 100%;\n        height: 100%;\n    }\n\n    .tag {\n        position: absolute;\n    }\n\n    .tag:hover {\n        background-color: rgba(0, 0, 0, 0.2);\n        border-radius: 5px;\n    }\n\n    .title{\n        position: absolute;\n        top: 0;\n        left: 0;\n        margin: 0;\n    }\n\n    canvas {\n        border-radius: 20px;\n    }\n</style>"]}]}