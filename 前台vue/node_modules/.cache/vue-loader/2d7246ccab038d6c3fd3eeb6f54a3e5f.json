{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\Message.vue?vue&type=style&index=0&id=78528860&scoped=true&lang=less&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\Message.vue","mtime":1648530386185},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtY29udGFpbmVyewogICAgZGlzcGxheTogYmxvY2s7Cn0KCi5wdWJsaXNoewogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmF1dGhvciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIC5ua25hbWV7CiAgICAgICAgbWFyZ2luOiAxMHB4OwogICAgfQp9CgouaW1nIHsKICAgIHdpZHRoOiAzMDBweDsKICAgIG1hcmdpbjogMjBweDsKfQoKLmNvbW1lbnQgewogICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCAjY2NjOwogICAgbWFyZ2luOiAzMHB4IDA7CiAgICBkaXNwbGF5OiBmbGV4Owp9CgovKi5lbC1hdmF0YXIgeyovCi8qICAgIHdpZHRoOiAzNXB4OyovCi8qICAgIGhlaWdodDogMzVweDsqLwovKiAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsqLwovKiAgICBib3gtc2hhZG93OiAwIDAgMTBweCAycHggcmdiYSgwLCAwLCAwLCAuMDYpOyovCi8qICAgIGZsZXgtc2hyaW5rOiAwOyovCi8qfSovCgouY29udGVudCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgZm9udC1zaXplOiAxNHB4OwogICAgZmxleC1ncm93OiAxOwoKICAgIC5ua25hbWUgewogICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgICAgIG1heC13aWR0aDogNTMwcHg7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwoKICAgICAgICAucnAsIC5kYXRlIHsKICAgICAgICAgICAgY29sb3I6ICM5OTk7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmJsb2cgewogICAgICAgICAgICBjb2xvcjogIzM0OWVkZjsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICAgICAgfQogICAgfQoKICAgIC5yZXBseSB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICB9CgogICAgLm9wIHsKICAgICAgICBjb2xvcjogI2RkZDsKICAgICAgICBmb250LXdlaWdodDogbGlnaHRlcjsKCiAgICAgICAgLnJlcCB7CiAgICAgICAgICAgIGNvbG9yOiAjMzQ5ZWRmOwogICAgICAgIH0KCiAgICAgICAgLmRlbCB7CiAgICAgICAgICAgIGNvbG9yOiByZWQ7CiAgICAgICAgfQogICAgfQoKICAgIC5vcDpob3ZlciB7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQp9Cg=="},{"version":3,"sources":["Message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Message.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-container style=\"opacity: 0.9\" class=\"message\">\n        <el-card class=\"animate__animated animate__fadeInLeft publish\">\n            <div class=\"author\">\n                <el-avatar v-if=\"userInfo===null\" icon=\"el-icon-user-solid\" size=\"large\" style=\"background-color: #666\"></el-avatar>\n                <el-avatar v-else :src=\"userInfo.avatar\" size=\"large\"></el-avatar>\n                <div>\n                    <div class=\"nkname\">\n                        <span class=\"name\" v-if=\"userInfo===null\">匿名用户</span>\n                        <span class=\"name\" v-else>{{userInfo.nickname}} </span>\n                    </div>\n                </div>\n            </div>\n            <el-form :model=\"messageForm\" :rules=\"messageFormRules\" ref=\"messageFormRef\">\n                <el-form-item prop=\"content\">\n                    <el-input :rows=\"5\" v-model=\"messageForm.content\" type=\"textarea\" placeholder=\"请输入你的留言\"></el-input>\n                </el-form-item>\n                <el-form-item style=\"text-align: right\">\n                    <el-button type=\"primary\" @click=\"publish\">点击发表</el-button>\n                </el-form-item>\n            </el-form>\n        </el-card>\n\n        <el-card v-if=\"messageList.length>0\" class=\"animate__animated animate__fadeInLeft\">\n            <ul style=\"padding: 0;\" class=\"comment-list\">\n                <li class=\"comment\" v-for=\"ms in messageList\" :key=\"ms.id\">\n                    <el-avatar v-if=\"ms.avatar!==''\" :src=\"ms.avatar\" ></el-avatar>\n                    <el-avatar v-else  icon=\"el-icon-user-solid\"></el-avatar>\n                    <div class=\"content\">\n                        <div style=\"display: flex;justify-content: space-between;width: 100%\">\n                            <div class=\"nkname\">\n                                <span class=\"name\">{{ms.nickName}} </span>\n                                <span class=\"date\">{{ms.createTime | dataFormat3}}</span>\n                            </div>\n                        </div>\n                        <p class=\"reply\">{{ms.content}}</p>\n                    </div>\n                    <!--                    {{cmt}}-->\n                </li>\n            </ul>\n        </el-card>\n    </el-container>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nexport default {\n    data() {\n        return {\n            picList: [],\n            editing: false,\n            messageList: [],\n            // userInfo: null,\n            message:{\n                userId:-1,\n                content:''\n            },\n            messageForm:{\n                content:''\n            },\n            messageFormRules:{\n                content: [\n                    {required: true, message: \"留言内容不能为空！\"},\n                    {min: 0, max: 100, message: \"留言内容不超过100字！\"}\n                ]\n            },\n            \n        }\n    },\n    created() {\n        this.getMessageList()\n    },\n    computed:{\n        ...mapState([\n            'userInfo',\n            'administrator'\n        ])\n    },\n    methods: {\n        // 留言发表\n        publish(){\n            this.$refs.messageFormRef.validate(  async valid => {\n                if (!valid) return\n                this.message.content = this.messageForm.content\n                if (this.userInfo === null){\n                    this.message.userId = -1\n                    this.message.nickname = \"匿名用户\"\n                    this.message.avatar = ''\n                } else {\n                    this.message.userId = this.userInfo.userId\n                    this.message.nickname = this.userInfo.nickname\n                    this.message.avatar = this.userInfo.avatar\n                }\n                const {data: res} = await this.$blog.post('/messages',{\n                    message:this.message\n                })\n                if (res.code === 200) {\n                    this.getMessageList()\n                    this.$message({message: \"留言发表成功\", type: 'success', offset: 80});\n                } else {\n                    this.$message({message: \"留言发表失败！\", type: 'error', offset: 80});\n                }\n            })\n\n\n\n        },\n        // 获取留言列表\n        async getMessageList() {\n            const {data: res} = await this.$blog.get('/messages')\n            this.messageList = res.data.sort((a, b) => {\n                return b.createTime.localeCompare(a.createTime)\n            })\n        },\n    },\n}\n</script>\n\n<style scoped lang=\"less\">\n    .el-container{\n        display: block;\n    }\n\n    .publish{\n        margin-bottom: 20px;\n    }\n\n    .author {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        width: 100%;\n        margin-bottom: 20px;\n        .nkname{\n            margin: 10px;\n        }\n    }\n\n    .img {\n        width: 300px;\n        margin: 20px;\n    }\n\n    .comment {\n        border-bottom: 1px dashed #ccc;\n        margin: 30px 0;\n        display: flex;\n    }\n\n    /*.el-avatar {*/\n    /*    width: 35px;*/\n    /*    height: 35px;*/\n    /*    border: 2px solid white;*/\n    /*    box-shadow: 0 0 10px 2px rgba(0, 0, 0, .06);*/\n    /*    flex-shrink: 0;*/\n    /*}*/\n\n    .content {\n        text-align: left;\n        font-size: 14px;\n        flex-grow: 1;\n\n        .nkname {\n            margin-left: 10px;\n            max-width: 530px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n\n            .rp, .date {\n                color: #999;\n                margin-left: 10px;\n            }\n\n            .blog {\n                color: #349edf;\n                margin-left: 10px;\n            }\n        }\n\n        .reply {\n            margin-left: 10px;\n        }\n\n        .op {\n            color: #ddd;\n            font-weight: lighter;\n\n            .rep {\n                color: #349edf;\n            }\n\n            .del {\n                color: red;\n            }\n        }\n\n        .op:hover {\n            cursor: pointer;\n        }\n    }\n</style>"]}]}