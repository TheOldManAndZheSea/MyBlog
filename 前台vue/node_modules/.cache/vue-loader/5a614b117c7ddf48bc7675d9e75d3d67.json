{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\VisitorMap.vue?vue&type=style&index=0&id=95a038f0&scoped=true&lang=less&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\VisitorMap.vue","mtime":1628309540000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29tLWNvbnRhaW5lciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5jb20tY2hhcnQgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwp9Cgo="},{"version":3,"sources":["VisitorMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"VisitorMap.vue","sourceRoot":"src/components/admin/charts","sourcesContent":["<template>\n  <div class=\"com-container\">\n    <div class=\"com-chart\" ref=\"visit_ref\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'echarts/lib/component/geo'\nimport 'echarts/lib/chart/map'\nimport 'echarts/lib/component/visualMap'\n\nexport default {\n  data() {\n    return {\n      chartInstance: null,\n      allData: [],\n      mapData: {}, //所获取的省份的地图矢量的缓存\n    }\n  },\n  mounted() {\n    this.initChart()\n    this.getData()\n    window.addEventListener('resize', this.screenAdapter)\n    this.screenAdapter()\n  },\n  methods: {\n    screenAdapter() {\n      this.chartInstance.resize()\n    },\n    async initChart() {\n      this.chartInstance = this.$echarts.init(this.$refs.visit_ref, this.theme)\n      const res = require('@/assets/map/china.json')\n      this.$echarts.registerMap('china', res)\n      const initOption = {\n        title:{\n          text: '用户来源'\n        },\n        geo: {\n          type: 'map',\n          roam: true, // 鼠标滑动放大缩小\n          map: 'china',\n        },\n        // '<img src=\"'+lt.avatar+'\"/>'\n        tooltip: {\n          trigger: 'item',\n          formatter: function (params) {\n            let html = ''\n            if (!params.data) return html\n            for (const lt of params.data.users){\n              html+='<div style=\"display: flex;align-items: center\"><img style=\"width: 18px;border-radius: 50%\" src=\"'+lt.avatar+'\"/><span style=\"font-size: x-small;margin-left: 5px\">'+lt.nickname+'</span></div> '\n            }\n            return html\n          }\n        },\n        legend: {\n          left: '5%',\n          bottom: '5%',\n          orient: 'vertical'\n        },\n        visualMap: {\n          itemWidth: 4,\n          min: 0,\n          max: 50,\n          hoverLink: false,\n          textStyle: {\n            color: 'rgba(0,0,0,0.65)'\n          },\n          pieces: [{\n            gte: 50,\n            label: '>= 50',\n            color: '#FF7C32'\n          }, {\n            gte: 30,\n            lte: 49,\n            label: '30 - 49',\n            color: '#FDCC1A'\n          }, {\n            gte: 10,\n            lte: 29,\n            label: '10 - 29',\n            color: '#5AD7D8'\n          }, {\n            gte: 1,\n            lte: 9,\n            label: '1 - 9',\n            color: '#4174fe'\n          }, {\n            gte: 0,\n            lte: 0,\n            label: '0',\n            value: 0,\n            color: '#f5f5f5'\n          }\n          ]\n        },\n        series: [{\n          type: 'map',\n          geoIndex: 0,\n          data: []\n        }]\n\n      }\n      this.chartInstance.setOption(initOption)\n    },\n    async getData() {\n      const {data: res} = await this.$blog.get('/admin/getUserAreaList');\n      if (res.code === 200) {\n        let list = {}\n        res.data.forEach((item) => {\n          if (typeof list[item.loginProvince] === 'undefined') {\n            list[item.loginProvince] = [item]\n          } else {\n            list[item.loginProvince].push(item)\n          }\n        })\n        Object.entries(list).forEach((item) => {\n          this.allData.push({name: item[0], value: item[1].length,users:item[1]})\n        })\n        setTimeout(() => {\n          this.updateChart()\n        },300)\n\n      } else {\n        this.$message.error('获取用户数据错误!')\n      }\n    },\n    updateChart() {\n      const dataOption = {\n        series: [{\n          data: this.allData\n        }]\n      }\n      this.chartInstance.setOption(dataOption)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n  .com-container {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .com-chart {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n</style>"]}]}