{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\layout\\NavBar.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\layout\\NavBar.vue","mtime":1648198261460},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNlYXJjaCBpbnB1dC5lbC1pbnB1dF9faW5uZXIgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAvKmJvcmRlci1yYWRpdXM6IDIwcHg7Ki8KICBjb2xvcjogI2NjY2NjYzsKfQo="},{"version":3,"sources":["NavBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsSA;AACA;AACA;AACA;AACA","file":"NavBar.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n  <!--导航-->\n  <div>\n    <div\n      class=\"animate__animated animate__fadeIn title\"\n      :key=\"key\"\n      :style=\"{ 'background-image': bgUrl }\"\n    ></div>\n    <el-header\n      :style=\"'margin-bottom:' + headerBottom + 'px'\"\n      class=\"animate__animated animate__fadeIn\"\n    >\n      <h2\n        class=\"animate__animated animate__swing logo\"\n        :key=\"shade\"\n        @click=\"shade++\"\n      >\n        {{blogConfig.title}}\n      </h2>\n      <el-menu\n        :default-active=\"activeIndex\"\n        class=\"el-menu-demo\"\n        mode=\"horizontal\"\n        background-color=\"rgba(0,0,0,0)\"\n        style=\"border: none\"\n        router\n        text-color=\"#fff\"\n        active-text-color=\"#ffd04b\"\n      >\n        <el-menu-item\n          :index=\"'/' + item.path\"\n          v-for=\"item in menulist\"\n          background-color=\"rgba(0,0,0,0)\"\n          :key=\"item.id\"\n          @click=\"changePage(item.path)\"\n        >\n          <template slot=\"title\">\n            <!--                图标-->\n            <i :class=\"iconsObj[item.id]\"></i>\n            <!--                文本-->\n            <span>{{ item.authName }}</span>\n          </template>\n        </el-menu-item>\n      </el-menu>\n      <div v-if=\"menuHiddenVisiable\">\n        <el-menu\n          :default-active=\"activeIndex\"\n          class=\"animate__animated animate__fadeInDown el-menu-hidden\"\n          background-color=\"#545c64\"\n          router\n          text-color=\"#fff\"\n          active-text-color=\"#ffd04b\"\n        >\n          <el-menu-item\n            :index=\"'/' + item.path\"\n            v-for=\"item in menulist\"\n            :key=\"item.id\"\n            @click=\"changePage(item.path)\"\n          >\n            <template slot=\"title\">\n              <!--                图标-->\n              <i :class=\"iconsObj[item.id]\"></i>\n              <!--                文本-->\n              <span>{{ item.authName }}</span>\n            </template>\n          </el-menu-item>\n        </el-menu>\n      </div>\n\n      <div class=\"menu-expend\" @click=\"menuExpend\">\n        <i class=\"el-icon-menu\"></i>\n      </div>\n      <div class=\"search_input\">\n        <el-input\n          @focus=\"checkInput\"\n          @blur=\"notSearching()\"\n          class=\"search\"\n          placeholder=\"请输入内容\"\n          prefix-icon=\"el-icon-search\"\n          v-model=\"queryInfo.query\"\n          size=\"mini\"\n        >\n        </el-input>\n        <ul v-if=\"searching\">\n          <li\n            class=\"animate__animated animate__fadeInDown search-blog\"\n            v-for=\"blog in searchList\"\n            :key=\"blog.id\"\n            @click=\"getBlogInfo(blog.id)\"\n          >\n            <a>{{ blog.title }}</a>\n          </li>\n        </ul>\n      </div>\n\n      <div v-if=\"logined\" style=\"margin-right: 50px\">\n        <el-button size=\"mini\" v-if=\"!blogConfig.isOpenLogin\" effect=\"light\" type=\"primary\" @click=\"showLFV\"\n          >登录</el-button\n        >\n        <el-button size=\"mini\" v-if=\"!blogConfig.isOpenRegister\" effect=\"light\" type=\"warning\" @click=\"showRFV\"\n          >注册</el-button\n        >\n      </div>\n      <div v-else class=\"loginInfo\">\n        <el-avatar :src=\"userInfo.avatar\"></el-avatar>\n        <div class=\"user-option\">\n          <h3 class=\"web-font nickname\">{{ userInfo.nickname }}</h3>\n          <p v-if=\"administrator\" class=\"logout\" @click=\"manageBlog\">\n            管理博客\n          </p>\n          <p class=\"logout\" @click=\"logout\">退出登录</p>\n        </div>\n      </div>\n      <login></login>\n      <register></register>\n    </el-header>\n  </div>\n</template>\n\n<script>\nimport Login from \"../login/Login\";\nimport Register from \"../login/Register\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Register,\n    Login,\n  },\n  data() {\n    return {\n      queryInfo: {\n        query: \"\",\n        timer: null,\n      },\n      bgUrl:'',\n      key: 0,\n      shade: 0,\n      scrollFlag: false,\n      navClass: \"\",\n      searchList: [],\n      searching: false,\n      activeIndex: \"1\",\n      menulist: [\n        {\n          id: 1,\n          authName: \"首页\",\n          path: \"index\",\n        },\n        {\n          id: 2,\n          authName: \"随笔\",\n          path: \"essay\",\n        },\n        {\n          id: 3,\n          authName: \"项目\",\n          path: \"project\",\n        },\n        {\n          id: 4,\n          authName: \"留言\",\n          path: \"message\",\n        },\n        {\n          id: 5,\n          authName: \"关于我\",\n          path: \"about\",\n        },\n      ],\n      iconsObj: {\n        1: \"iconfont icon-menu_home\",\n        2: \"iconfont icon-jilu2\",\n        3: \"iconfont icon-xiangmu1\",\n        4: \"iconfont icon-liuyan\",\n        5: \"iconfont icon-gerenzhongxin1\",\n      },\n      isCollapse: false,\n      menuHiddenVisiable: false,\n      headerBottom: 0,\n      blogConfig: {},\n    };\n  },\n  computed: {\n    logined() {\n      return this.userInfo === null;\n    },\n    ...mapState([\"userInfo\", \"administrator\"]),\n  },\n  watch: {\n    \"queryInfo.query\": {\n      handler(value) {\n        if (this.timer) {\n          clearTimeout(this.timer);\n        }\n        this.timer = setTimeout(() => {\n          this.searchBlog();\n        }, 300);\n      },\n    },\n  },\n  created() {\n    this.getBlogCongif();\n    // const idx = Math.floor(Math.random() * 12 + 1);\n    // this.bgUrl = `url(\"http://hikari.top/images/bg_${idx}.jpg\")`;\n    // console.log(this.bgUrl);\n  },\n  mounted() {\n    window.addEventListener(\"scroll\", this.handleScroll);\n  },\n\n  methods: {\n    //获取博客配置信息\n    getBlogCongif() {\n      this.$blog.get(\"/Blog/TBlogconfig/getQuery\").then((res)=>{\n        if (res.data.code === 200) {\n        this.blogConfig = res.data.data;\n        this.bgUrl = `url(`+this.blogConfig.blogBackGroundImage+`)`;\n      }\n      });\n    },\n    notSearching() {\n      setTimeout(() => {\n        this.searching = false;\n      }, 100);\n    },\n    changePage(name) {\n      // console.log(name)\n      this.$store.commit(\"changePage\", name);\n    },\n    showLFV() {\n      this.bgUrl = 'url(\"http://www.dmoe.cc/random.php\")';\n      this.$store.commit(\"showLFV\");\n    },\n    showRFV() {\n      this.$store.commit(\"showRFV\");\n    },\n    checkInput() {\n      this.searching = this.queryInfo.query !== \"\";\n    },\n    async searchBlog() {\n      if (this.queryInfo.query === \"\") {\n        this.searching = false;\n        return;\n      }\n      const { data: res } = await this.$blog.get(\"/search\", {\n        params: this.queryInfo,\n      });\n      // console.log(res.data.content)\n      this.searchList = res.data.content.slice(0, 5);\n      if (this.searchList.length !== 0) {\n        this.searching = true;\n      }\n    },\n    // 跳转到博客详情页\n    getBlogInfo(blogId) {\n      this.$store.commit(\"changeBlogKey\");\n      this.$router.push({ path: \"/blogInfo\", query: { id: blogId } });\n    },\n    handleScroll() {\n      const scrollTop =\n        window.pageYOffset ||\n        document.documentElement.scrollTop ||\n        document.body.scrollTop;\n      if (scrollTop > 60 && this.scrollFlag === false) {\n        this.scrollFlag = true;\n      } else if (scrollTop <= 60 && this.scrollFlag === true) {\n        this.scrollFlag = false;\n      }\n    },\n    // 注销登录\n    logout() {\n      window.sessionStorage.clear();\n      this.$store.commit(\"getUserInfo\");\n      this.$message({ message: \"退出登录成功\", type: \"success\", offset: 80 });\n    },\n    // 进入管理界面\n    manageBlog() {\n      this.$router.push(\"/admin\");\n    },\n    // 展开菜单栏\n    menuExpend() {\n      this.menuHiddenVisiable = !this.menuHiddenVisiable;\n      if (this.menuHiddenVisiable === true) {\n        this.headerBottom = 280;\n      } else {\n        this.headerBottom = 0;\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.search input.el-input__inner {\n  background-color: rgba(0, 0, 0, 0.1);\n  /*border-radius: 20px;*/\n  color: #cccccc;\n}\n</style>\n\n<style scoped lang=\"less\">\n.title {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  height: 120vh;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-bottom: 3px solid #fff;\n}\n\n.el-header {\n  transition: 0.2s;\n}\n\n.el-header:hover {\n  opacity: 1 !important;\n}\n\n.el-menu {\n  background-color: rgba(0, 0, 0, 0) !important;\n}\n\n.el-menu /deep/ .el-menu-item {\n  background-color: rgba(0, 0, 0, 0) !important;\n}\n\n.el-menu /deep/ .el-menu-item i {\n  color: rgba(255, 255, 255);\n}\n\n.el-menu /deep/ .el-menu-item:hover i {\n  color: white;\n}\n\n.el-menu /deep/ .el-menu-item:hover {\n  background-color: rgba(0, 0, 0, 0.5) !important;\n}\n\n.search_input {\n  position: relative;\n  box-sizing: border-box;\n}\n\n.search_input ul {\n  position: absolute;\n  top: 30px;\n  width: 100%;\n  border: 1px solid #e5e9ef;\n  margin-top: 1px;\n  background: #fff;\n  z-index: 10000;\n  border-radius: 2px;\n  box-shadow: 0 2px 4px rgba(58, 118, 142, 0.16);\n  padding: 10px 0;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n.search_input ul li {\n  padding: 0 16px;\n  height: 32px;\n  line-height: 32px;\n  cursor: pointer;\n  word-wrap: break-word;\n  word-break: break-all;\n  display: block;\n  color: #222;\n  position: relative;\n  /*transition: .2 ease;*/\n}\n\n.search_input ul li:hover {\n  background-color: #e8f3ff;\n}\n\n.search-blog {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n\n.el-header {\n  width: 100%;\n  position: sticky;\n  top: 0;\n  z-index: 9999;\n  background-color: rgba(0, 0, 0, 0.2);\n  color: #fff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 20px;\n\n  > div {\n    display: flex;\n    align-items: center;\n  }\n\n  img {\n    height: 40px;\n  }\n\n  span {\n    margin-left: 15px;\n  }\n\n  button {\n    opacity: 0.8;\n  }\n\n  .el-menu {\n    flex-shrink: 0;\n  }\n\n  .logo {\n    color: #ffd04b;\n  }\n\n  .logo:hover {\n    cursor: pointer;\n  }\n}\n\n.loginInfo {\n  flex-shrink: 0;\n  /*background-color: #545c64;*/\n  color: white;\n  height: 60px;\n  border: none;\n  width: 160px;\n  position: relative;\n\n  .el-avatar {\n    width: 36px;\n    height: 36px;\n    margin: 0 auto;\n    z-index: 200;\n  }\n\n  .user-option {\n    position: absolute;\n    top: 60px;\n    width: 150px;\n    left: 50%;\n    transform: translate(-50%, 0);\n    font-size: 14px;\n    text-align: center;\n    line-height: 30px;\n    background-color: #fff;\n    visibility: hidden;\n    opacity: 0;\n    color: #333;\n    box-shadow: 0 2px 6px 0 rgb(0 0 0 / 10%);\n    border: 1px solid #eee;\n    border-radius: 5px;\n  }\n\n  .logout {\n    margin: 10px auto;\n    padding: 0;\n    width: 100%;\n  }\n\n  .logout:hover {\n    background-color: #eee;\n  }\n}\n\n.loginInfo:hover {\n  cursor: pointer;\n\n  .el-avatar {\n    transform: translate(0, 50%) scale(1.5);\n    transition: 0.3s;\n  }\n\n  .user-option {\n    visibility: visible;\n    opacity: 1;\n    transition: opacity 0.4s;\n  }\n}\n\n.zZindex {\n  margin-top: 300px;\n  padding-top: 100px;\n}\n\n.menu-expend {\n  display: none !important;\n}\n\n.el-menu-hidden {\n  /*display: none;*/\n  position: absolute;\n  top: 60px;\n  left: 0;\n  border-top: 1px solid #ccc;\n  border-right: none;\n  width: 100%;\n\n  .el-menu-item {\n    border-bottom: 1px solid #ccc;\n  }\n}\n\n@media screen and (max-width: 1000px) {\n  .search_input {\n    visibility: hidden;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .el-menu /deep/ .el-menu-item {\n    background-color: rgba(0, 0, 0, 0.3) !important;\n  }\n\n  .el-menu-demo {\n    display: none;\n  }\n\n  .title {\n    width: 100%;\n    background-position-x: center;\n  }\n\n  .menu-expend {\n    display: block !important;\n    position: fixed;\n    top: 18px;\n    left: 150px;\n  }\n\n  .menu-expend:hover {\n    color: #ffd04b;\n    cursor: pointer;\n  }\n\n  .title {\n    background-position-y: 0;\n  }\n}\n</style>\n"]}]}