{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-waterfall2\\waterfall.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-waterfall2\\waterfall.vue","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci52dWUtd2F0ZXJmYWxsewoJd2lkdGg6MTAwJTsKCW92ZXJmbG93LXk6IGF1dG87Cglwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnZ1ZS13YXRlcmZhbGwgLnNsb3QtYm94ewoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiAxMDAlOwoJbGVmdDogMTAwJTsKCXdpZHRoOiAwOwoJaGVpZ2h0OiAwOwoJb3ZlcmZsb3c6IGhpZGRlbjsKfQoudnVlLXdhdGVyZmFsbCAudnVlLXdhdGVyZmFsbC1jb2x1bW57CglmbG9hdDogbGVmdDsKfQoudnVlLXdhdGVyZmFsbC5pcy10cmFuc2l0aW9uIGltZ3sKCW9wYWNpdHk6IDA7Cn0KLnZ1ZS13YXRlcmZhbGwuaXMtdHJhbnNpdGlvbiBpbWcuYW5pbWF0aW9uewoJYW5pbWF0aW9uOjAuNHMgIGxhenktYW5pbWF0aW9uICBsaW5lYXI7CglhbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkczsKfQoKIEBrZXlmcmFtZXMgbGF6eS1hbmltYXRpb257Cglmcm9tewoJCW9wYWNpdHk6IDA7Cgl9Cgl0b3sKCQlvcGFjaXR5OiAxOwoJfQp9Cg=="},{"version":3,"sources":["waterfall.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"waterfall.vue","sourceRoot":"node_modules/vue-waterfall2","sourcesContent":["<style>\r\n\t.vue-waterfall{\r\n\t\twidth:100%;\r\n\t\toverflow-y: auto;\r\n\t\tposition: relative;\r\n\t}\r\n\t.vue-waterfall .slot-box{\r\n\t\tposition: absolute;\r\n\t\ttop: 100%;\r\n\t\tleft: 100%;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.vue-waterfall .vue-waterfall-column{\r\n\t\tfloat: left;\r\n\t}\r\n\t.vue-waterfall.is-transition img{\r\n\t\topacity: 0;\r\n\t}\r\n\t.vue-waterfall.is-transition img.animation{\r\n\t\tanimation:0.4s  lazy-animation  linear;\r\n\t\tanimation-fill-mode: forwards;\r\n\t}\r\n\r\n\t @keyframes lazy-animation{\r\n\t\tfrom{\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\t\tto{\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n</style>\r\n<template>\r\n\t<div class=\"vue-waterfall\" :style=\"{height:height}\" ref=\"vueWaterfall\" id=\"vueWaterfall\" :class=\"isTransition&&'is-transition'\" >\r\n\t\t<div class=\"slot-box\">\r\n\t\t\t<slot ></slot>\t\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nglobal.regeneratorRuntime = require(\"babel-runtime/regenerator\");\r\nimport bus from './bus'\r\n\r\n\texport default{\r\n\t\tprops:{\r\n\t\t\tcol:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:2\r\n\t\t\t},\r\n\t\t\twidth:Number,\r\n\t\t\theight:{\r\n\t\t\t\ttype:String\r\n\t\t\t\t// default:'100vh',    取消height默认值\r\n\t\t\t},\r\n\t\t\tdata:{\r\n\t\t\t\ttype:Array,\r\n\t\t\t\tdefault:[]\r\n\t\t\t},\r\n\t\t\tgutterWidth:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:10\r\n\t\t\t},\r\n\t\t\tisTransition:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:true\r\n\t\t\t},\r\n\t\t\tlazyDistance:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:300\r\n\t\t\t},\r\n\t\t\tloadDistance:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:300\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\troot:null,\r\n\t\t\t\tcolumns:[],\r\n\t\t\t\tloadmore:true,\r\n\t\t\t\ttimeout:null,\r\n\t\t\t\tlazyTimeout:null,\r\n\t\t\t\tlastScrollTop:0,\r\n\t\t\t\ttimer:null,\r\n\t\t\t\tloadedIndex:0,\r\n\t\t\t\tcolumnWidth:0,\r\n\t\t\t\tisresizing:false,\r\n\t\t\t\tclientHeight:document.documentElement.clientHeight || document.body.clientHeight,\r\n\t\t\t\tclientWidth:document.documentElement.clientWidth || document.body.clientWidth,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\ttrueLazyDistance(){\r\n\t\t\t\treturn this.clientWidth/375*this.lazyDistance\r\n\t\t\t},\r\n\t\t\tmax(){\r\n\t\t\t\treturn this.clientWidth/375*this.loadDistance\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tcol(val){\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdata(newVal,oldVal){\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tclearTimeout(this.timer)\r\n\t\t\t\t\tthis.timer = setTimeout(()=>{\r\n\t\t\t\t\t\tif(this.isresizing)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(newVal.length<this.loadedIndex)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.loadedIndex = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(newVal.length>oldVal.length || newVal.length>this.loadedIndex)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(newVal.length === oldVal.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.resize(this.loadedIndex>0?this.loadedIndex:null)\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.resize(oldVal.length>0?oldVal.length:null)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},300)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinit(){   //initialize\r\n\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\tthis.clearColumn()\r\n\t\t\t\tvar col = parseInt(this.col)\r\n\t\t\t\tfor(var i =0;i<col;i++){\r\n\t\t\t\t\tlet odiv = document.createElement('div')\r\n\t\t\t\t\todiv.className = 'vue-waterfall-column'\r\n\t\t\t\t\tif(this.width)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\todiv.style.width = this.width + 'px'\r\n\t\t\t\t\t\tif(i != 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\todiv.style.marginLeft = this.gutterWidth + 'px'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.columnWidth = this.width\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\todiv.style.width = 100/parseInt(col) +'%'\r\n\t\t\t\t\t\tthis.columnWidth = 100/parseInt(col)/100 * document.documentElement.clientWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.root)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.root&&this.root.appendChild(odiv)\r\n\t\t\t\t\tthis.columns.push(odiv)\r\n\t\t\t\t}\r\n\t\t\t\tthis.resize()\r\n\t\t\t},\r\n\t\t\tasync __setDomImageHeight(dom)\r\n\t\t\t{\r\n\t\t\t\tif(!dom.getElementsByTagName)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar imgs = dom.getElementsByTagName('img')\r\n\t\t\t\tfor(var i=0;i<imgs.length;i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar lazySrc = imgs[i].getAttribute('lazy-src')\r\n\t\t\t\t\tif(!imgs[i].getAttribute('src')&&lazySrc)\r\n\t\t\t \t\t{\r\n\t\t\t\t\t\t var newImg = new Image()\r\n\t\t\t\t\t\t newImg.src = lazySrc\r\n\t\t\t\t\t\t if(newImg.complete)\r\n\t\t\t\t\t\t {\r\n\t\t\t\t\t\t \tvar trueWidth = imgs[i].offsetWidth || this.columnWidth\r\n\t\t\t\t\t\t\tvar imgColumnHeight = newImg.height*trueWidth/newImg.width\r\n\t\t\t\t\t\t\tif(imgs[i].offsetWidth)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\timgs[i].style.height = imgColumnHeight+'px'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t else{\r\n\t\t\t\t\t\t\t await new Promise((resolve,reject)=>{\r\n\t\t\t\t\t\t\t\t newImg.onload =  function(){\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t \tvar trueWidth = imgs[i].offsetWidth || this.columnWidth\r\n\t\t\t\t\t\t\t\t \tvar imgColumnHeight = newImg.height*trueWidth/newImg.width\r\n\t\t\t\t\t\t\t\t\tif(imgs[i].offsetWidth)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\timgs[i].style.height = imgColumnHeight+'px'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewImg.onerror=  function(){\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t })\r\n\t\t\t\t\t\t }\r\n\t\t\t \t\t}\r\n\t\t\t\t}\t\t\t \t\r\n\t\t\t},\r\n\t\t\tasync append(dom){   //append dom element\r\n\t\t\t\tvar self = this\r\n\t\t\t\tif(this.columns.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet min = this.columns[0]\r\n\t\t\t\t\t\tfor(var i=1;i<this.columns.length;i++){\r\n\t\t\t\t\t\t\tif(await self.__getHeight(min)>await self.__getHeight(self.columns[i])){\r\n\t\t\t\t\t\t\t\tmin = self.columns[i]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tawait this.__setDomImageHeight(dom)\r\n\t\t\t\t\tmin && min.appendChild(dom)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcheckImg(dom){   //check has image\r\n\t\t\t\tif(!dom)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif(dom.getElementsByTagName&&dom.getElementsByTagName(\"img\").length)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync resize(index,elements){     //resize and render\r\n\t\t\t\tthis.isresizing = true\r\n\t\t\t\tthis.routeChanged = false  // 重置routeChanged\r\n\t\t\t\tvar self = this\r\n\t\t\t\tif(!this.$slots.default){\r\n\t\t\t\t\tthis.isresizing = false\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!index&&index!=0&&!elements)\r\n\t\t\t\t{\r\n\t\t\t\t\telements = this.$slots.default\r\n\t\t\t\t\tthis.loadedIndex = 0\r\n\t\t\t\t\tthis.clear()\r\n\t\t\t\t}\r\n\t\t\t\telse if(!elements){\r\n\t\t\t\t\tthis.loadedIndex = index\r\n\t\t\t\t\telements = this.$slots.default.splice(index)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var j=0;j<elements.length;j++){\r\n\t\t\t\t\tif(this.routeChanged){\r\n\t\t\t\t\t\tconsole.warn('路由发生变化，<vue-waterfall>组件停止渲染')\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(elements[j].elm&&self.checkImg(elements[j].elm))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar imgs = elements[j].elm.getElementsByTagName('img')\r\n\t\t\t\t\t\tvar newImg = new Image()\r\n\t\t\t\t\t\tnewImg.src = imgs[0].getAttribute('src') || imgs[0].getAttribute('lazy-src')\r\n\t\t\t\t\t\tif(newImg.complete)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tawait self.append(elements[j].elm)\t\r\n\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tawait new Promise( (resolve,reject)=>{\r\n\t\t\t\t\t\t\t\tnewImg.onload = async function(){\r\n\t\t\t\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewImg.onerror= async function(e){\r\n\t\t\t\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t\t\t\t\tself.lazyLoad(imgs)\r\n\t\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tawait self.append(elements[j].elm)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.loadedIndex++\r\n\t\t\t\t}\r\n\t\t\t\tthis.isresizing = false\r\n\t\t\t\tself.$emit('finish')\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tcomputedPx(img,imgApi){\r\n\r\n\t\t\t\timg.style.width = imgApi.width/this.columnWidth\r\n\t\t\t},\r\n\t\t\tlazyLoad(imgs){  \r\n\t\t\t\tif(!imgs)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!this.root)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.root = this.$refs.vueWaterfall\r\n\t\t\t\t\t}\r\n\t\t\t\t\timgs = this.root&&this.root.getElementsByTagName('img')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!imgs || imgs.length<0)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tfor(var index=0;index<imgs.length; index++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(imgs[index].className.match('animation')&&imgs[index].getAttribute('src'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(imgs[index].className.match('animation')&&!imgs[index].getAttribute('src'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timgs[index].src = imgs[index].getAttribute('lazy-src')\r\n\t\t\t\t\t\timgs[index].removeAttribute('lazy-src')\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(imgs[index].getAttribute('src')&&!imgs[index].className.match('animation')){\r\n\t\t\t\t\t\timgs[index].className = imgs[index].className + ' animation'\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(!imgs[index].getAttribute('src')&&imgs[index].getBoundingClientRect().top<this.clientHeight+this.trueLazyDistance)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timgs[index].src = imgs[index].getAttribute('lazy-src')\r\n\t\t\t\t\t\timgs[index].className = imgs[index].className + ' animation'\r\n\t\t\t\t\t\timgs[index].removeAttribute('lazy-src')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclearColumn(){\r\n\t\t\t\tthis.columns.forEach((item)=>{\r\n\t\t\t\t\titem.remove()\r\n\t\t\t\t})\r\n\t\t\t\tthis.columns=[]\r\n\t\t\t},\r\n\t\t\tclear(){\r\n\t\t\t\tthis.columns.forEach((item)=>{\r\n\t\t\t\t\titem.innerHTML = ''\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmix(){\r\n\t\t\t\tvar elements = this.$slots.default\r\n\t\t\t\telements.sort(()=>{return Math.random()-0.5})\r\n\t\t\t\tthis.resize(0,elements)\r\n\t\t\t},\r\n\t\t\tasync __getHeight(dom){\r\n\t\t\t \treturn dom.offsetHeight\r\n\t\t\t},\r\n\t\t\t__emitLoadMore(){\r\n\t\t\t\tif(!this.root)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar self = this\r\n\t\t\t\tconst scrollTop =  this.height?this.root.scrollTop : document.documentElement.scrollTop  || document.body.scrollTop\r\n\t\t\t\tconst scrollHeight = this.height?this.root.scrollHeight : document.documentElement.offsetHeight\r\n\t\t\t\tvar diff = scrollHeight - scrollTop - self.clientHeight\r\n\t\t\t\tself.$emit('scroll',{scrollHeight:scrollHeight,scrollTop:scrollTop,clientHeight:self.clientHeight,diff:diff,time:Date.now()})\r\n\t\t\t\tif(diff <self.max&&self.loadmore&&scrollHeight>self.clientHeight){\r\n\t\t\t\t\tself.lastScrollTop =  scrollTop\r\n\t\t\t\t\tself.loadmore = false\r\n\t\t\t\t\tself.$emit('loadmore')\r\n\t\t\t\t}\r\n\t\t\t\telse if(diff>=self.max){\r\n\t\t\t\t\tself.loadmore = true\r\n\t\t\t\t}\r\n\t\t\t\tclearTimeout(self.lazyTimeout)\r\n\t\t\t\tself.lazyTimeout = setTimeout(function(){\r\n\t\t\t\t\tself.lazyLoad()\r\n\t\t\t\t},14)\r\n\t\t\t},\r\n\r\n\t\t\t// 监听路由是否发生变化\r\n\t\t\t__listenRouterChange () {\r\n\t\t\t\t// 重写pushState与replaceState事件函数\r\n\t\t\t\tvar _wr = function (type) {\r\n\t\t\t\t\t// 记录原生事件\r\n\t\t\t\t\tvar orig = history[type];\r\n\t\t\t\t\treturn function () {\r\n\t\t\t\t\t\t// 触发原生事件\r\n\t\t\t\t\t\tvar rv = orig.apply(this, arguments);\r\n\t\t\t\t\t\t// 自定义事件\r\n\t\t\t\t\t\tvar e = new Event(type);\r\n\t\t\t\t\t\te.arguments = arguments;\r\n\t\t\t\t\t\t// 触发自定义事件\r\n\t\t\t\t\t\twindow.dispatchEvent(e);\r\n\t\t\t\t\t\treturn rv;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst events = ['replaceState','pushState']\r\n\t\t\t\tevents.forEach(event => {\r\n\t\t\t\t\twindow.addEventListener(event, ()=>{\r\n\t\t\t\t\t\tthis.routeChanged = true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 重写history\r\n\t\t\t\t\twindow.history[event] = _wr(event)\r\n\t\t\t\t})\r\n\t\t\t\twindow.addEventListener('popstate', ()=>{\r\n\t\t\t\t\tthis.routeChanged = true\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\tdestroyed() {\r\n\t\t\tthis.root && (this.root.onscroll = null)\r\n\t\t\tthis.root && (this.root.onresize = null)\r\n\t\t\twindow.onscroll = null\r\n\t\t\twindow.onresize = null\r\n\t\t},\r\n\t\tbeforeCreate(){\r\n\t\t\tbus.$on('forceUpdate',()=>{this.resize()})\r\n\t\t\tbus.$on('mix',()=>{this.mix()})\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tmounted(){\r\n\t\t\tthis.__listenRouterChange()\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.init()\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tif(this.height){\r\n\t\t\t\t\tthis.root.onscroll=function(e){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.root.addEventListener('touchmove',function(){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\twindow.onscroll=function(e){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdocument.addEventListener('touchmove',function(){\r\n\t\t\t\t\t\tself.__emitLoadMore()\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>"]}]}