{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\VisitorMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\charts\\VisitorMap.vue","mtime":1628309540000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAnZWNoYXJ0cy9saWIvY29tcG9uZW50L2dlbycKaW1wb3J0ICdlY2hhcnRzL2xpYi9jaGFydC9tYXAnCmltcG9ydCAnZWNoYXJ0cy9saWIvY29tcG9uZW50L3Zpc3VhbE1hcCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnRJbnN0YW5jZTogbnVsbCwKICAgICAgYWxsRGF0YTogW10sCiAgICAgIG1hcERhdGE6IHt9LCAvL+aJgOiOt+WPlueahOecgeS7veeahOWcsOWbvuefoumHj+eahOe8k+WtmAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdENoYXJ0KCkKICAgIHRoaXMuZ2V0RGF0YSgpCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY3JlZW5BZGFwdGVyKQogICAgdGhpcy5zY3JlZW5BZGFwdGVyKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIHNjcmVlbkFkYXB0ZXIoKSB7CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5yZXNpemUoKQogICAgfSwKICAgIGFzeW5jIGluaXRDaGFydCgpIHsKICAgICAgdGhpcy5jaGFydEluc3RhbmNlID0gdGhpcy4kZWNoYXJ0cy5pbml0KHRoaXMuJHJlZnMudmlzaXRfcmVmLCB0aGlzLnRoZW1lKQogICAgICBjb25zdCByZXMgPSByZXF1aXJlKCdAL2Fzc2V0cy9tYXAvY2hpbmEuanNvbicpCiAgICAgIHRoaXMuJGVjaGFydHMucmVnaXN0ZXJNYXAoJ2NoaW5hJywgcmVzKQogICAgICBjb25zdCBpbml0T3B0aW9uID0gewogICAgICAgIHRpdGxlOnsKICAgICAgICAgIHRleHQ6ICfnlKjmiLfmnaXmupAnCiAgICAgICAgfSwKICAgICAgICBnZW86IHsKICAgICAgICAgIHR5cGU6ICdtYXAnLAogICAgICAgICAgcm9hbTogdHJ1ZSwgLy8g6byg5qCH5ruR5Yqo5pS+5aSn57yp5bCPCiAgICAgICAgICBtYXA6ICdjaGluYScsCiAgICAgICAgfSwKICAgICAgICAvLyAnPGltZyBzcmM9IicrbHQuYXZhdGFyKyciLz4nCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nLAogICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgIGxldCBodG1sID0gJycKICAgICAgICAgICAgaWYgKCFwYXJhbXMuZGF0YSkgcmV0dXJuIGh0bWwKICAgICAgICAgICAgZm9yIChjb25zdCBsdCBvZiBwYXJhbXMuZGF0YS51c2Vycyl7CiAgICAgICAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7YWxpZ24taXRlbXM6IGNlbnRlciI+PGltZyBzdHlsZT0id2lkdGg6IDE4cHg7Ym9yZGVyLXJhZGl1czogNTAlIiBzcmM9IicrbHQuYXZhdGFyKyciLz48c3BhbiBzdHlsZT0iZm9udC1zaXplOiB4LXNtYWxsO21hcmdpbi1sZWZ0OiA1cHgiPicrbHQubmlja25hbWUrJzwvc3Bhbj48L2Rpdj4gJwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBodG1sCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGxlZnQ6ICc1JScsCiAgICAgICAgICBib3R0b206ICc1JScsCiAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcKICAgICAgICB9LAogICAgICAgIHZpc3VhbE1hcDogewogICAgICAgICAgaXRlbVdpZHRoOiA0LAogICAgICAgICAgbWluOiAwLAogICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgIGhvdmVyTGluazogZmFsc2UsCiAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDAsMCwwLDAuNjUpJwogICAgICAgICAgfSwKICAgICAgICAgIHBpZWNlczogW3sKICAgICAgICAgICAgZ3RlOiA1MCwKICAgICAgICAgICAgbGFiZWw6ICc+PSA1MCcsCiAgICAgICAgICAgIGNvbG9yOiAnI0ZGN0MzMicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZ3RlOiAzMCwKICAgICAgICAgICAgbHRlOiA0OSwKICAgICAgICAgICAgbGFiZWw6ICczMCAtIDQ5JywKICAgICAgICAgICAgY29sb3I6ICcjRkRDQzFBJwogICAgICAgICAgfSwgewogICAgICAgICAgICBndGU6IDEwLAogICAgICAgICAgICBsdGU6IDI5LAogICAgICAgICAgICBsYWJlbDogJzEwIC0gMjknLAogICAgICAgICAgICBjb2xvcjogJyM1QUQ3RDgnCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGd0ZTogMSwKICAgICAgICAgICAgbHRlOiA5LAogICAgICAgICAgICBsYWJlbDogJzEgLSA5JywKICAgICAgICAgICAgY29sb3I6ICcjNDE3NGZlJwogICAgICAgICAgfSwgewogICAgICAgICAgICBndGU6IDAsCiAgICAgICAgICAgIGx0ZTogMCwKICAgICAgICAgICAgbGFiZWw6ICcwJywKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIGNvbG9yOiAnI2Y1ZjVmNScKICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIHR5cGU6ICdtYXAnLAogICAgICAgICAgZ2VvSW5kZXg6IDAsCiAgICAgICAgICBkYXRhOiBbXQogICAgICAgIH1dCgogICAgICB9CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24oaW5pdE9wdGlvbikKICAgIH0sCiAgICBhc3luYyBnZXREYXRhKCkgewogICAgICBjb25zdCB7ZGF0YTogcmVzfSA9IGF3YWl0IHRoaXMuJGJsb2cuZ2V0KCcvYWRtaW4vZ2V0VXNlckFyZWFMaXN0Jyk7CiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgbGV0IGxpc3QgPSB7fQogICAgICAgIHJlcy5kYXRhLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgIGlmICh0eXBlb2YgbGlzdFtpdGVtLmxvZ2luUHJvdmluY2VdID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBsaXN0W2l0ZW0ubG9naW5Qcm92aW5jZV0gPSBbaXRlbV0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpc3RbaXRlbS5sb2dpblByb3ZpbmNlXS5wdXNoKGl0ZW0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICBPYmplY3QuZW50cmllcyhsaXN0KS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICB0aGlzLmFsbERhdGEucHVzaCh7bmFtZTogaXRlbVswXSwgdmFsdWU6IGl0ZW1bMV0ubGVuZ3RoLHVzZXJzOml0ZW1bMV19KQogICAgICAgIH0pCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNoYXJ0KCkKICAgICAgICB9LDMwMCkKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W55So5oi35pWw5o2u6ZSZ6K+vIScpCiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVDaGFydCgpIHsKICAgICAgY29uc3QgZGF0YU9wdGlvbiA9IHsKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBkYXRhOiB0aGlzLmFsbERhdGEKICAgICAgICB9XQogICAgICB9CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24oZGF0YU9wdGlvbikKICAgIH0KICB9Cn0K"},{"version":3,"sources":["VisitorMap.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisitorMap.vue","sourceRoot":"src/components/admin/charts","sourcesContent":["<template>\n  <div class=\"com-container\">\n    <div class=\"com-chart\" ref=\"visit_ref\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'echarts/lib/component/geo'\nimport 'echarts/lib/chart/map'\nimport 'echarts/lib/component/visualMap'\n\nexport default {\n  data() {\n    return {\n      chartInstance: null,\n      allData: [],\n      mapData: {}, //所获取的省份的地图矢量的缓存\n    }\n  },\n  mounted() {\n    this.initChart()\n    this.getData()\n    window.addEventListener('resize', this.screenAdapter)\n    this.screenAdapter()\n  },\n  methods: {\n    screenAdapter() {\n      this.chartInstance.resize()\n    },\n    async initChart() {\n      this.chartInstance = this.$echarts.init(this.$refs.visit_ref, this.theme)\n      const res = require('@/assets/map/china.json')\n      this.$echarts.registerMap('china', res)\n      const initOption = {\n        title:{\n          text: '用户来源'\n        },\n        geo: {\n          type: 'map',\n          roam: true, // 鼠标滑动放大缩小\n          map: 'china',\n        },\n        // '<img src=\"'+lt.avatar+'\"/>'\n        tooltip: {\n          trigger: 'item',\n          formatter: function (params) {\n            let html = ''\n            if (!params.data) return html\n            for (const lt of params.data.users){\n              html+='<div style=\"display: flex;align-items: center\"><img style=\"width: 18px;border-radius: 50%\" src=\"'+lt.avatar+'\"/><span style=\"font-size: x-small;margin-left: 5px\">'+lt.nickname+'</span></div> '\n            }\n            return html\n          }\n        },\n        legend: {\n          left: '5%',\n          bottom: '5%',\n          orient: 'vertical'\n        },\n        visualMap: {\n          itemWidth: 4,\n          min: 0,\n          max: 50,\n          hoverLink: false,\n          textStyle: {\n            color: 'rgba(0,0,0,0.65)'\n          },\n          pieces: [{\n            gte: 50,\n            label: '>= 50',\n            color: '#FF7C32'\n          }, {\n            gte: 30,\n            lte: 49,\n            label: '30 - 49',\n            color: '#FDCC1A'\n          }, {\n            gte: 10,\n            lte: 29,\n            label: '10 - 29',\n            color: '#5AD7D8'\n          }, {\n            gte: 1,\n            lte: 9,\n            label: '1 - 9',\n            color: '#4174fe'\n          }, {\n            gte: 0,\n            lte: 0,\n            label: '0',\n            value: 0,\n            color: '#f5f5f5'\n          }\n          ]\n        },\n        series: [{\n          type: 'map',\n          geoIndex: 0,\n          data: []\n        }]\n\n      }\n      this.chartInstance.setOption(initOption)\n    },\n    async getData() {\n      const {data: res} = await this.$blog.get('/admin/getUserAreaList');\n      if (res.code === 200) {\n        let list = {}\n        res.data.forEach((item) => {\n          if (typeof list[item.loginProvince] === 'undefined') {\n            list[item.loginProvince] = [item]\n          } else {\n            list[item.loginProvince].push(item)\n          }\n        })\n        Object.entries(list).forEach((item) => {\n          this.allData.push({name: item[0], value: item[1].length,users:item[1]})\n        })\n        setTimeout(() => {\n          this.updateChart()\n        },300)\n\n      } else {\n        this.$message.error('获取用户数据错误!')\n      }\n    },\n    updateChart() {\n      const dataOption = {\n        series: [{\n          data: this.allData\n        }]\n      }\n      this.chartInstance.setOption(dataOption)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n  .com-container {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .com-chart {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n</style>"]}]}