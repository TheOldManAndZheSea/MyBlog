{"remainingRequest":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Tags.vue?vue&type=style&index=0&id=110ad889&scoped=true&lang=less&","dependencies":[{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\src\\components\\admin\\Tags.vue","mtime":1628309540000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\文档\\张天赐\\练习代码\\VSCode\\个人博客\\前台\\myblog-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5vcDpob3ZlciB7CiAgICBjdXJzb3I6IHBvaW50ZXI7CgogICAgaTpob3ZlciB7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgZm9udC1zaXplOiBsYXJnZTsKICAgIH0KfQo="},{"version":3,"sources":["Tags.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Tags.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div>\n        <!--    面包屑导航区-->\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>标签管理</el-breadcrumb-item>\n        </el-breadcrumb>\n        <el-card shadow=\"never\">\n            <el-button type=\"primary\" style=\"margin-bottom: 20px\" @click=\"createTagDialogFormVisible = true\">新建标签</el-button>\n            <el-row :gutter=\"20\">\n                <el-col :sm=\"8\" :lg=\"6\" v-for=\"tag in tagList\" style=\"margin-bottom: 20px;\" :key=\"tag.id\">\n                    <el-card shadow=\"hover\" style=\"position:relative;border: 2px solid #eee;text-align: left\">\n                        <div class=\"op\" style=\"position: absolute;right: 5px;top: 5px\">\n                            <i @click=\"editTagById(tag.id)\" class=\"el-icon-edit\"\n                               style=\"color: #3a8ee6;margin-right: 5px\"></i>\n                            <i @click=\"deleteTagById(tag.id)\" class=\"el-icon-delete\" style=\"color: red\"></i>\n                        </div>\n                        <b> 标签名称 <span style=\"color: #3a8ee6\">{{tag.name}}</span></b> <br>\n                        <p style=\"margin-bottom: 0\">博客数量 <span style=\"color: #2ac06d\">{{tag.blogs.length}}</span></p>\n                    </el-card>\n                </el-col>\n            </el-row>\n        </el-card>\n        <el-dialog title=\"分类修改\" :visible.sync=\"createTagDialogFormVisible\">\n            <el-form style=\"text-align: left\" ref=\"createTagFormRef\" :model=\"createTagForm\"\n                     :rules=\"createTagFormRules\" label-width=\"80px\">\n                <el-form-item label=\"标签名称\" prop=\"name\">\n                    <el-input v-model=\"createTagForm.name\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"backPage\">取消</el-button>\n                <el-button tag=\"primary\" @click=\"createTag\">提交</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            tagList: [],\n            createTagDialogFormVisible:false,\n            createTagForm: {\n                name: ''\n            },\n            createTagFormRules: {\n                name: [\n                    {required: true, message: '分类名称不能为空', trigger: 'blur'}\n                ],\n            },\n            tag: {\n                id: null,\n                name: '',\n            },\n        }\n    },\n    created() {\n        this.getFullTagList();\n    },\n    methods: {\n\n        compare(property) {\n            return function (a, b) {\n                let value1 = a[property].length;\n                let value2 = b[property].length;\n                return value2 - value1;\n            }\n        },\n        // 根据id编辑标签\n        editTagById(id) {\n            this.tag.id = id\n            this.createTagDialogFormVisible = true\n        },\n        // 创建新标签\n        createTag() {\n            this.$refs.createTagFormRef.validate(async valid => {\n                if (!valid) return\n                this.tag.name = this.createTagForm.name\n                // console.log(this.tag)\n                const {data: res} = await this.$blog.post('/admin/tags', {\n                    tag: this.tag\n                })\n                // console.log(res)\n                if (res.code === 200) {\n                    this.createTagDialogFormVisible = false\n                    this.tag.id = null\n                    this.$refs.createTagFormRef.resetFields()\n                    await this.getFullTagList()\n                    return this.$message.success(res.message)\n                } else {\n                    this.createTagDialogFormVisible = false\n                    this.$refs.createTagFormRef.resetFields()\n                    return this.$message.error(res.message)\n                }\n            })\n        },\n        // 根据id删除标签\n        async deleteTagById(id) {\n            // 弹出对话框\n            const confirmResult = await this.$confirm(\n                    '此操作将永久删除该标签, 是否继续',\n                    '提示',\n                    {\n                        confirmButtonText: '确定',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }\n            ).catch(err => err)\n            if (confirmResult !== 'confirm') {\n                return this.$message.info('已取消删除')\n            }\n            const {data: res} = await this.$blog.get(`/admin/tags/${id}/delete`)\n            // console.log(res)\n            if (res.code === 200) {\n                this.createTypeDialogFormVisible = false\n                await this.getFullTagList()\n                return this.$message.success(res.message)\n            } else {\n                return this.$message.error(res.message)\n            }\n        },\n        // 得到所有的标签\n        async getFullTagList() {\n            const {data: res} = await this.$blog.get('/admin/getFullTagList')\n            this.tagList = res.data.sort(this.compare('blogs'))\n        },\n\n        selectCard(id) {\n            this.selectedCard = id\n        },\n        backPage() {\n            this.createTagDialogFormVisible = false\n            this.createTagForm.name = ''\n            this.$refs.createTagFormRef.resetFields()\n        },\n    },\n}\n</script>\n\n<style scoped lang=\"less\">\n    .op:hover {\n        cursor: pointer;\n\n        i:hover {\n            font-weight: bold;\n            font-size: large;\n        }\n    }\n</style>"]}]}